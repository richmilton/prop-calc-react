(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t){var a=String.fromCharCode(37);e.exports={formTypes:{NUMBER:"number",TEXT:"text",CHECKBOX:"checkbox",SELECT:"select",EMAIL:"email"},currencyPlaceholder:"##CURR##",percentSign:a,toastPlaceHolder:"##LABEL##"}},21:function(e,t){var a=[{upto:1e6,rate:1},{upto:"end",rate:2}],n=[{upto:25e4,rate:2,load:3},{upto:325e3,rate:5,load:3},{upto:75e4,rate:10,load:3},{upto:"end",rate:12,load:3}],r={commercial:{england:[{upto:15e4,rate:0},{upto:25e4,rate:2},{upto:"end",rate:5}],wales:[{upto:15e4,rate:0},{upto:25e4,rate:1},{upto:1e6,rate:5},{upto:"end",rate:6}],scotland:[{upto:15e4,rate:0},{upto:25e4,rate:1},{upto:"end",rate:5}],ireland:a},residential:{first:{england:{thresholds:[{upto:3e5,rate:0},{upto:5e5,rate:5}],limit:5e5},scotland:{thresholds:[{upto:175e3,rate:0}].concat(n),limit:-1}},england:[{upto:125e3,rate:0,load:3},{upto:25e4,rate:2,load:3},{upto:925e3,rate:5,load:3},{upto:15e5,rate:10,load:3},{upto:"end",rate:12,load:3}],wales:[{upto:18e4,rate:0,load:3},{upto:25e4,rate:3.5,load:3},{upto:4e5,rate:5,load:3},{upto:75e4,rate:7.5,load:3},{upto:15e5,rate:10,load:3},{upto:"end",rate:12,load:3}],scotland:[{upto:145e3,rate:0,load:3}].concat(n),ireland:a}};e.exports=r},33:function(e,t,a){e.exports=a(60)},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),o=a.n(l),s=a(16),c=a(20),i=a(15),u=a(13),d=a(5),m=a.n(d),p=a(17),f=a(8),h=a(11),y=a(9),b=a(4),g=a(10),v=a(2),E=a(30),S=function(e,t){Object(E.confirmAlert)({message:e,buttons:[{label:"Yes",onClick:t},{label:"No",onClick:function(){return!1}}]})},C=a(1),T=new RegExp(C.currencyPlaceholder,"g"),w=function(e,t){var a=String.fromCharCode(t);return e.replace(T,a)};function F(e){var t=e.name,a=e.doLabelClass,n=e.dynamicLabel,l=e.label,o=e.type,s=e.currency,c=w(l,s);return r.a.createElement("div",{className:"checkbox"===o?"checkbox-label":"input-label"},r.a.createElement("label",{htmlFor:t,className:a(t)},n(t,c)))}var k={Input:function(e){var t=e.className,a=e.name,n=e.type,l=e.onInput,o=e.placeholder,s=e.label,c=e.defVal,i=e.doLabelClass,u=e.dynamicLabel,d=e.currency,m=e.required,p=e.disabled,f=w(s,d);return r.a.createElement("li",{key:a},r.a.createElement("input",{className:t||"form-control",key:a,type:n,name:a,id:a,onChange:function(e){return l(e)},autoComplete:"off",placeholder:o||f||"".concat(a," [").concat(n,"]"),value:c||"",checked:"yes"===c,required:m||!1,disabled:p}),F({name:a,doLabelClass:i,dynamicLabel:u,label:s,type:n,currency:d}))},Select:function(e){var t=e.className,a=e.name,n=e.type,l=e.onInput,o=e.label,s=e.defVal,c=e.options,i=e.doLabelClass,u=e.dynamicLabel,d=e.disabled;return r.a.createElement("li",{key:a},r.a.createElement("select",{value:s,className:t||"form-control",key:a,name:a,id:a,onChange:function(e){return l(e)},disabled:d},c.map(function(e){return r.a.createElement("option",{key:e.value,name:e.name,value:e.value},e.name)})),F({name:a,doLabelClass:i,dynamicLabel:u,label:o,type:n}))}},N=k.Input,L=k.Select;function x(e){var t=e.render,a=e.fields,n=e.className;return r.a.createElement("ul",{className:n},t(a))}var j=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(h.a)(this,Object(y.a)(t).call(this,e))).doLabel=a.doLabel.bind(Object(v.a)(Object(v.a)(a))),a.doLabelClass=a.doLabelClass.bind(Object(v.a)(Object(v.a)(a))),a.renderFields=a.renderFields.bind(Object(v.a)(Object(v.a)(a))),a.renderFieldCols=a.renderFieldCols.bind(Object(v.a)(Object(v.a)(a))),a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.handleSave=a.handleSave.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.calculate)()}},{key:"doLabel",value:function(e,t){var a=this.props.formData;return a&&a[e]?t||e:""}},{key:"doLabelClass",value:function(e){var t=this.props.formData;return t&&t[e]?"show":"hide"}},{key:"handleChange",value:function(e){var t,a=e.type,n=e.value,r=e.checked,l=e.name,o=this.props;switch(a){case C.formTypes.NUMBER:t=Number.isNaN(n)?0:parseFloat(n)||0;break;case C.formTypes.CHECKBOX:t=r?"yes":"no";break;default:t=n||""}o.calculate(l,t)}},{key:"handleSave",value:function(e){e.preventDefault(),(0,this.props.onsave)(),e.target.blur()}},{key:"renderFields",value:function(e){var t=this,a=[],n=this.props,r=n.currsymbol,l=n.formData,o=function(e){var t=e.regex,a=e.whenField;return t.test(l[a])};return e.forEach(function(e){var n=Object(u.a)({},e);n.dynamicLabel=function(e,a){return t.doLabel(e,a)},n.doLabelClass=function(e){return t.doLabelClass(e)},n.onInput=function(e){return t.handleChange(e.target)},n.onblur=function(e){return t.handleChange(e.target)},n.currency=r,n.defVal=l[n.name],n.disabled=n.disabled&&n.disabled.some(o),"select"===n.type?a.push(L(n)):a.push(N(n))}),a}},{key:"renderFieldCols",value:function(){var e=this.props.fields,t=Math.floor(e.length/2),a=e.slice(0),n=a.splice(t);return[r.a.createElement(x,{key:"1",fields:a,className:"left",render:this.renderFields}),r.a.createElement(x,{key:"2",fields:n,className:"right",render:this.renderFields})]}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.twocols,n=e.fields,l=e.showsave?r.a.createElement("ul",{className:"left"},r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"btn-primary form-control",onClick:this.handleSave},"save this"))):"";return r.a.createElement("form",{name:t,id:t},"yes"===a?this.renderFieldCols():this.renderFields(n),l)}}]),t}(n.Component),O=[{label:"Project name",name:"projectName",type:C.formTypes.TEXT,defVal:"",required:!0},{label:"Post code",name:"postCode",type:C.formTypes.TEXT,defVal:"",required:!0},{label:"Asking price(".concat(C.currencyPlaceholder,")"),name:"askingPrice",type:C.formTypes.NUMBER,defVal:0},{label:"Purchase price(".concat(C.currencyPlaceholder,")"),name:"propertyValue",type:C.formTypes.NUMBER,defVal:0},{label:"Done up value(".concat(C.currencyPlaceholder,")"),name:"doneUpValue",type:C.formTypes.NUMBER,defVal:0},{label:"Cash purchase",name:"buyingCash",type:C.formTypes.CHECKBOX,defVal:"no"},{label:"Initial LTV(".concat(C.percentSign,")"),name:"initialLoanToValue",type:C.formTypes.NUMBER,defVal:75,disabled:[{whenField:"buyingCash",regex:/yes/}]},{label:"Mortgage fee(".concat(C.currencyPlaceholder,")"),name:"initMortgageFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"buyingCash",regex:/yes/}]},{label:"Surveyors fee(".concat(C.currencyPlaceholder,")"),name:"initSurveyorsFee",type:C.formTypes.NUMBER,defVal:600},{label:"Legal fees(".concat(C.currencyPlaceholder,")"),name:"initLegalFee",type:C.formTypes.NUMBER,defVal:1500},{label:"Stamp duty type",name:"stampDutyType",type:C.formTypes.SELECT,options:[{value:"residential",name:"Residential"},{value:"commercial",name:"Commercial"}],defVal:"residential"},{label:"Stamp duty region",name:"stampDutyRegion",type:C.formTypes.SELECT,options:[{value:"england",name:"England/NI"},{value:"scotland",name:"Scotland"},{value:"wales",name:"Wales"},{value:"ireland",name:"Ireland"}],defVal:"england"},{label:"Stamp duty buyer",name:"stampDutyBuyer",type:C.formTypes.SELECT,options:[{value:"investor",name:"Investor"},{value:"first",name:"First time buyer"},{value:"home",name:"Moving house"}],defVal:"investor",disabled:[{whenField:"stampDutyType",regex:/commercial/}]},{label:"Monthly rent(".concat(C.currencyPlaceholder,")"),name:"monthlyRent",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Deal type",name:"dealType",type:C.formTypes.SELECT,options:[{value:"btl&flip",name:"Buy to let and flip"},{value:"btl",name:"Buy to let"},{value:"flip",name:"Flip"},{value:"home",name:"Home only"}],defVal:"btl&flip"},{label:"Refurbishment cost(".concat(C.currencyPlaceholder,")"),name:"refurbCost",type:C.formTypes.NUMBER,defVal:0},{label:"Other cost(".concat(C.currencyPlaceholder,")"),name:"otherCost",type:C.formTypes.NUMBER,defVal:0},{label:"Remortgage fee(".concat(C.currencyPlaceholder,")"),name:"remortgageFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Remortgage valuation fee(".concat(C.currencyPlaceholder,")"),name:"remortgageValuationFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Remortgage legal fees(".concat(C.currencyPlaceholder,")"),name:"remortgageLegalFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Repairing lease",name:"repairingLease",type:C.formTypes.CHECKBOX,defVal:"no",disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Letting agents rate(".concat(C.percentSign,")"),name:"agentsPercent",type:C.formTypes.NUMBER,defVal:10,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/},{whenField:"repairingLease",regex:/yes/}]},{label:"\n    MOE rate(".concat(C.percentSign,")"),name:"moePercent",type:C.formTypes.NUMBER,defVal:15,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/},{whenField:"repairingLease",regex:/yes/}]},{label:"Mortgage term",name:"mortgageTerm",type:C.formTypes.NUMBER,defVal:25},{label:"Interest rate(".concat(C.percentSign,")"),name:"mortgageInterestRatePercent",type:C.formTypes.NUMBER,defVal:6},{label:"Remortgage LTV(".concat(C.percentSign,")"),name:"loanToValue",type:C.formTypes.NUMBER,defVal:75,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Solicitors selling fee(".concat(C.currencyPlaceholder,")"),name:"sellingLegalFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!flip).)*$/}]},{label:"Agent/selling fee(".concat(C.currencyPlaceholder,")"),name:"agentSellingFee",type:C.formTypes.NUMBER,defVal:0,disabled:[{whenField:"dealType",regex:/^((?!flip).)*$/}]},{label:"Mortgage stress test(".concat(C.percentSign,")"),name:"mortgageStressMultipePercent",type:C.formTypes.NUMBER,defVal:125,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]},{label:"Stress interest rate(".concat(C.percentSign,")"),name:"mortgageStressInterestRatePercent",type:C.formTypes.NUMBER,defVal:5,disabled:[{whenField:"dealType",regex:/^((?!btl).)*$/}]}],M=(a(57),a(31)),R=a.n(M),P=function(e){return R()("dd/MM hh:mm:ss",new Date(parseInt(e,0)))},B=function(e,t){e.preventDefault(),e.target.blur(),t(e.target.id.split("-")[1])},D=function(e){var t=e.label,a=e.value,n=e.ondelete,l=e.onclick,o=e.deletable,s=e.firstname;return r.a.createElement("li",null,r.a.createElement("div",{className:"state"},r.a.createElement("button",{className:"btn-primary form-control",style:{width:"100%"},type:"submit",id:"select-".concat(a),onClick:function(e){return B(e,l)}},"".concat(t," (").concat(P(a)).concat(o?"":" ".concat(s),")"))),r.a.createElement("div",{className:"remove-state"},r.a.createElement("button",{className:"btn-sm btn-primary btn-warning",type:"submit",id:"delete-".concat(a),onClick:function(e){return B(e,n)},style:{display:o?"":"none"}},"delete")))},V=function(e){var t=e.data,a=e.ondelete,n=e.onselect,l=e.onclick,o=e.useremail,s=e.filter;if(t.map){var c=t.filter(s);return r.a.createElement("ul",null,c.map(function(e,t){var s=e.projectName,c=e.id,i=e.email,u="li-".concat(c,"-").concat(t);return r.a.createElement(D,{ondelete:a,key:"li-".concat(u),label:s||"untitled",value:c,onselect:n,onclick:l,deletable:o===i,firstname:i.split("@")[0].split(".")[0]})}))}return""},I=function(e){var t=e.label,a=e.value;return r.a.createElement("li",null,r.a.createElement("div",{className:"label"},t),r.a.createElement("div",{className:"value"},a))},U=function(e){var t=e.data,a=e.id;return t?r.a.createElement("ul",null,t.map(function(e,t){var n=e.label,l=e.value,o="li-".concat(a,"-").concat(t);return r.a.createElement(I,{key:"li-".concat(o),label:n,value:l})})):""},A=/^(GIR[ ]?0AA|((AB|AL|B|BA|BB|BD|BH|BL|BN|BR|BS|BT|CA|CB|CF|CH|CM|CO|CR|CT|CV|CW|DA|DD|DE|DG|DH|DL|DN|DT|DY|E|EC|EH|EN|EX|FK|FY|G|GL|GY|GU|HA|HD|HG|HP|HR|HS|HU|HX|IG|IM|IP|IV|JE|KA|KT|KW|KY|L|LA|LD|LE|LL|LN|LS|LU|M|ME|MK|ML|N|NE|NG|NN|NP|NR|NW|OL|OX|PA|PE|PH|PL|PO|PR|RG|RH|RM|S|SA|SE|SG|SK|SL|SM|SN|SO|SP|SR|SS|ST|SW|SY|TA|TD|TF|TN|TQ|TR|TS|TW|UB|W|WA|WC|WD|WF|WN|WR|WS|WV|YO|ZE)(\d[\dA-Z]?[ ]?\d[ABD-HJLN-UW-Z]{2}))|BFPO[ ]?\d{1,4})$/,H=function(e){return A.test(e.toUpperCase())},W={rmBuy:{commercial:"https://www.rightmove.co.uk/commercial-property-for-sale/search.html?radius=0.25&includeSSTC=true&searchLocation=",residential:"https://www.rightmove.co.uk/property-for-sale/search.html?radius=0.25&includeSSTC=true&searchLocation="},rmRent:{commercial:"https://www.rightmove.co.uk/commercial-property-to-let/search.html?radius=0.25&includeLetAgreed=true&searchLocation=",residential:"https://www.rightmove.co.uk/property-to-rent/search.html?radius=0.25&includeLetAgreed=true&searchLocation="},nhpSold:"https://nethouseprices.com/house-prices/",zooSold:"https://www.zoopla.co.uk/house-prices/",otmSold:"https://www.onthemarket.com/uk-house-prices/?property-type-prices=any&search-type=prices&sold-in=all-years&tenure=any&sold-prices-input=",gMap:"https://www.google.com/maps/place/"};function $(e){var t=e.href,a=e.text;return r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},a)}var G=function(e){var t=e.postCode,a=e.askingPrice,n=e.monthlyRent,l=e.propertyValue,o=e.stampDutyType.startsWith("commercial")?"commercial":"residential",s=1e3,c=1e5,i=Math.ceil((a||l||4e5)/c*1.2)*c,u=Math.ceil((n||s)/s*1.2)*s;return t&&H(t)?r.a.createElement(r.a.Fragment,null,"sold prices:"," ",r.a.createElement($,{href:W.nhpSold+t,text:"NHP"}),":",r.a.createElement($,{href:W.zooSold+t,text:"Zoopla"}),":",r.a.createElement($,{href:W.otmSold+t,text:"OTM"})," | ",r.a.createElement($,{href:"".concat(W.rmBuy[o]+t,"&maxPrice=").concat(i),text:"for sale"})," | ",r.a.createElement($,{href:"".concat(W.rmRent[o]+t,"&maxPrice=").concat(u),text:"to let"})," | ",r.a.createElement($,{href:W.gMap+t,text:"gmap"})):r.a.createElement("span",{style:{color:"red",fontStyle:"italic"}},"use a full valid post code to see links here")};var K=function(e){var t=e.data,a=e.currentState,n=e.currency,l=e.currentState,o=l.postCode,s=l.dealType,c=t.dealFinance,i=t.buyToLet,u=t.stress,d=t.flip,m=/btl/.test(s),p=/flip/.test(s),f=String.fromCharCode(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"res-block",style:{display:H(o)?"":"none"}},r.a.createElement("h6",null,"Links for this post code"),G(a)),r.a.createElement("div",{className:"res-block"},r.a.createElement("h6",null,"Deal finance (".concat(f,")")),r.a.createElement(U,{id:"1",data:c})),r.a.createElement("div",{className:"res-block",style:{display:m?"":"none"}},r.a.createElement("h6",null,"Buy to let (".concat(f,")")),r.a.createElement(U,{id:"2",data:i||""})),r.a.createElement("div",{className:"res-block",style:{display:m?"":"none"}},r.a.createElement("h6",null,"Stress test (".concat(f,")")),r.a.createElement(U,{id:"3",data:u||""})),r.a.createElement("div",{className:"res-block",style:{display:p?"":"none"}},r.a.createElement("h6",null,"Flip (".concat(f,")")),r.a.createElement(U,{id:"4",data:d})))},X=a(21),Y=a.n(X),q=function(e,t,a,n){var r=e/100,l=Y.a[t][a];if("first"===n&&"residential"===t&&!/^ireland$|^wales$/.test(a)){var o=Y.a[t].first[a],s=o.limit,c=o.thresholds;(-1===s||e<=s)&&(l=c)}var i,u,d,m=0;if(!t||!a)return 0;for(var p=0;p<l.length;p+=1){d="investor"===n&&l[p].load||0,i=l[p].upto;var f=l[p].rate;if(u=p>0?l[p-1].upto:0,"end"===i)return m+=(r-u/100)*(f+d);if(e<=i)return m+=0===p?r*(f+d):(r-u/100)*(f+d);m+=(i-u)/100*(f+d)}return m},J=function(e,t,a,n,r,l,o,s,c){return e+t+a+n+r+q(l,o,s,c)+l},z=["Remortgage advance","Remortgage deposit","Remortgage fees","Money in","Money out","Money left in","Monthly rental","Monthly mortgage payment","MOE","Letting agent fees","Monthly free cashflow","Gross yield"],Z=["Mortgage advance","Deposit","Stamp duty","Professional fees","Refurb/other costs","Total money in","Total cost","Interest only mortgage","Repayment mortgage","Repayment term"],Q=["Sale price","Selling costs","Total input costs","Profit (before tax)","Gain(%)"],_=["Stress test","Minimum rent"],ee=String.fromCharCode(37),te={freeCash:function(e){var t=e.loanToValue,a=e.propertyValue,n=e.doneUpValue,r=e.mortgageInterestRatePercent,l=e.monthlyRent,o=e.moePercent,s=e.agentsPercent,c=e.refurbCost,i=e.otherCost,u=e.stampDutyType,d=e.stampDutyRegion,m=e.stampDutyBuyer,p=e.remortgageFee,f=e.remortgageValuationFee,h=e.remortgageLegalFee,y=e.initMortgageFee,b=e.initLegalFee,g=e.initSurveyorsFee,v=e.repairingLease,E="yes"===v,S=t/100,C=Math.round(n*S),T=Math.round(n*(1-S)),w=Math.round(C*r/1200),F=E?0:l*o/100,k=E?0:l*s/100,N=l-("yes"===v?0:F)-w-k,L=p+f+h,x=y+b+g+(c+i)+q(a,u,d,m)+a,j=1200*l/x,O=z;return[{label:O[0],value:C.toFixed(2)},{label:O[1],value:T.toFixed(2)},{label:O[2],value:L.toFixed(2)},{label:O[3],value:x.toFixed(2)},{label:O[4],value:(C-L).toFixed(2)},{label:O[5],value:(x-(C-L)).toFixed(2)},{label:O[6],value:l.toFixed(2)},{label:O[7],value:w.toFixed(2)},{label:O[8],value:F.toFixed(2)},{label:O[9],value:k.toFixed(2)},{label:O[10],value:N.toFixed(2)},{label:O[11],value:j.toFixed(2)+ee}]},initialFinance:function(e){var t,a,n=e.buyingCash,r=e.initialLoanToValue,l=e.mortgageInterestRatePercent,o=e.propertyValue,s=e.initSurveyorsFee,c=e.initLegalFee,i=e.initMortgageFee,u=e.refurbCost,d=e.otherCost,m=e.stampDutyType,p=e.stampDutyRegion,f=e.stampDutyBuyer,h=e.mortgageTerm,y="yes"===n,b=r/100,g=y?0:Math.round(o*b),v=Math.round(g*l/1200),E=(a=h,(t=l)/100/12*g/(1-Math.pow(1+t/100/12,12*-a))),S=s+c+i,C=u+d,T=y?o:Math.round(o*(1-b)),w=q(o,m,p,f),F=J(s,c,i,u,d,o,m,p,f),k=F-g,N=Z;return[{label:N[0],value:g.toFixed(2)},{label:N[1],value:T.toFixed(2)},{label:N[2],value:w.toFixed(2)},{label:N[3],value:S.toFixed(2)},{label:N[4],value:C.toFixed(2)},{label:N[5],value:k.toFixed(2)},{label:N[6],value:F.toFixed(2)},{label:N[7],value:"".concat(v.toFixed(2)," pcm")},{label:N[8],value:"".concat(E.toFixed(2)," pcm")},{label:N[9],value:"".concat(h," years")}]},flip:function(e){var t=e.sellingLegalFee,a=e.agentSellingFee,n=e.initSurveyorsFee,r=e.initLegalFee,l=e.initMortgageFee,o=e.refurbCost,s=e.otherCost,c=e.propertyValue,i=e.stampDutyType,u=e.stampDutyRegion,d=e.stampDutyBuyer,m=e.doneUpValue,p=J(n,r,l,o,s,c,i,u,d),f=t+a,h=Math.round((m-p)/p*1e4)/100,y=h>=20?"green":"red",b=Q;return[{label:b[0],value:m.toFixed(2)},{label:b[1],value:f.toFixed(2)},{label:b[2],value:p.toFixed(2)||"0"},{label:b[3],value:(m-(p+f)).toFixed(2)||"0",col:y},{label:b[4],value:h.toFixed(2)||0,col:y}]},allInputCosts:J,stressTest:function(e){var t=e.doneUpValue,a=e.monthlyRent,n=e.loanToValue,r=e.mortgageStressInterestRatePercent,l=e.mortgageStressMultipePercent,o=Math.ceil(t*n/100*r/1200*l/100),s=a>=o,c=_;return[{label:c[0],value:s?"pass":"fail"},{label:c[1],value:o.toFixed(2)}]},getCurrencyCode:function(e){return"ireland"===e.stampDutyRegion?8364:163}},ae={label:"User",name:"userEmail",type:C.formTypes.EMAIL,defVal:"",required:!0},ne=ae.name,re=ae.type,le=ae.label,oe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={email:""},a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"handleChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.doLogin,a=this.state.email;e.preventDefault(),a&&t(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"column",style:{textAlign:"center"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"form-control",key:ne,type:re,name:ne,id:ne,autoComplete:"off",placeholder:"".concat(le," [").concat(re,"]"),onChange:this.handleChange,onBlur:this.handleChange,required:!0}),r.a.createElement("button",{type:"submit",className:"btn-primary form-control"},"go")))}}]),t}(n.Component);var se=function(e){var t=e.doLogout;return r.a.createElement("button",{type:"submit",className:"",onClick:function(e){e.preventDefault(),t()}},"logoff")},ce={unrecognisedUser:{message:"You need to be whitelisted to use the view and save functions.\n          You can still use the app to perform calculations which can be printed,\n          if you want to save copies. If you think you should be whitelisted,\n          check the email address and try logging in again, or contact your administrator",options:{appearance:"warning",autoDismissTimeout:1e4}},dataRetrieved:{message:"proposal data refreshed",options:{appearance:"success"}},noneSaved:{message:"you have no saved proposal data",options:{appearance:"info"}},dataRetrievalError:{message:"something went wrong retrieving proposal data",options:{appearance:"error"}},saving:{message:"saving new version of ".concat(C.toastPlaceHolder),options:{appearance:"info"}},savedSuccess:{message:"new version of ".concat(C.toastPlaceHolder," saved successfully"),options:{appearance:"success"}},saveError:{message:"something went wrong saving new version of ".concat(C.toastPlaceHolder),options:{appearance:"error"}},deleting:{message:"deleting ".concat(C.toastPlaceHolder),options:{appearance:"info"}},deleteSuccess:{message:"".concat(C.toastPlaceHolder," deleted successfully"),options:{appearance:"success"}},deleteError:{message:"something went wrong deleting ".concat(C.toastPlaceHolder),options:{appearance:"error"}},login:{message:"logged in as ".concat(C.toastPlaceHolder),options:{appearance:"success"}},logout:{message:"logged out",options:{appearance:"success"}},loaded:{message:"".concat(C.toastPlaceHolder," loaded successfully"),options:{appearance:"success"}}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).every(function(a){return e[a]===t[a]})},ue=(a(58),a(3),"https://ww69n8b5kk.execute-api.eu-west-2.amazonaws.com/dev/comparisons"),de=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={data:{dealFinance:[],buyToLet:[],stress:[],flip:[]},currency:163,savedStates:{Items:[]},currentState:{projectName:""},hasWorkingAPI:!1,userEmail:e.cookies.get("email")||""},a.calculate=a.calculate.bind(Object(v.a)(Object(v.a)(a))),a.saveState=a.saveState.bind(Object(v.a)(Object(v.a)(a))),a.deleteState=a.deleteState.bind(Object(v.a)(Object(v.a)(a))),a.selectState=a.selectState.bind(Object(v.a)(Object(v.a)(a))),a.login=a.login.bind(Object(v.a)(Object(v.a)(a))),a.logout=a.logout.bind(Object(v.a)(Object(v.a)(a))),a.toastIt=a.toastIt.bind(Object(v.a)(Object(v.a)(a))),a.allowAbortChanges=a.allowAbortChanges.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(b.a)(t,null,[{key:"setDefaultFormData",value:function(){var e={};return O.map(function(t){return e[t.name]=t.defVal,!1}),e}}]),Object(b.a)(t,[{key:"componentDidMount",value:function(){""!==this.state.userEmail&&this.getSavedStates(!0)}},{key:"getSavedStates",value:function(e){var t=this;(function(){var a=Object(p.a)(m.a.mark(function a(){var n,r,l,o,s;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=function(e,t){var a=e.projectName,n=e.id,r=t.projectName,l=t.id;return a+n<r+l?-1:a+n>r+l?1:0},r=t.state.userEmail,l=null,o=e,a.prev=4,a.next=7,fetch("".concat(ue,"/user/").concat(r));case 7:if(200!==(s=a.sent).status){a.next=15;break}return a.next=11,s.json();case 11:(l=a.sent).Items.length>0?(l.Items.sort(n),t.toastIt(ce.dataRetrieved)):t.toastIt(ce.noneSaved),a.next=16;break;case 15:403===s.status?t.toastIt(ce.unrecognisedUser):(o=!0,t.toastIt(ce.dataRetrievalError));case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(4),o=!0,t.toastIt(ce.dataRetrievalError);case 22:return a.prev=22,t.loadState(l,o),a.finish(22);case 25:case"end":return a.stop()}},a,null,[[4,18,22,25]])}));return function(){return a.apply(this,arguments)}})()(e).then(function(){return{getSavedStates:"finished"}})}},{key:"toastIt",value:function(e,t){var a=e.message,n=e.options;this.props.toastManager.add(a.replace(C.toastPlaceHolder,t),n)}},{key:"findState",value:function(e){return this.state.savedStates.Items.find(function(t){return t.id===e})}},{key:"loadState",value:function(e,a){var n=this.state.userEmail,r={savedStates:e||{Items:[]},hasWorkingAPI:!!e};a&&(r.currentState=t.setDefaultFormData()),n&&r.currentState&&(r.currentState.email=n),this.setState(r)}},{key:"calculate",value:function(e,t){var a=this.state.currentState,n=e?Object(u.a)({},a,Object(i.a)({},e,t)):a,r=te.initialFinance(n),l=te.freeCash(n),o=te.flip(n),s=te.stressTest(n),c=te.getCurrencyCode(n);document.getElementById("doc-title").text=n.projectName.replace(/ /g,"-");var d={data:{dealFinance:r,buyToLet:l,stress:s,flip:o},currency:c};e&&(d.currentState=n),this.setState(d)}},{key:"saveState",value:function(){var e=this;(function(){var t=Object(p.a)(m.a.mark(function t(){var a,n,r,l,o,s,c,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.currentState,r=a.currentState,l=r.projectName,o=r.postCode,s=a.userEmail,""!==l&&""!==o){t.next=3;break}return t.abrupt("return");case 3:return e.toastIt(ce.saving,l),c=Object(u.a)({},n,{email:s}),t.prev=5,t.next=8,fetch(ue,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)});case 8:return i=t.sent,t.next=11,i.json();case 11:e.toastIt(ce.savedSuccess,l),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.toastIt(ce.saveError,l);case 17:return t.prev=17,e.getSavedStates(!1),t.finish(17);case 20:case"end":return t.stop()}},t,null,[[5,14,17,20]])}));return function(){return t.apply(this,arguments)}})()().then(function(){return{saveState:"finished"}})}},{key:"deleteState",value:function(e){var t=this,a=this.findState(e).projectName,n="do you really want to delete '".concat(a,"' created ").concat(P(e));S(n,function(){var n=!1;(function(){var e=Object(p.a)(m.a.mark(function e(r){var l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.state.userEmail,e.prev=1,e.next=4,fetch(ue,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:r,email:l})});case 4:200===e.sent.status&&(o=t.state.currentState,n=o===r,t.toastIt(ce.deleteSuccess,a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.toastIt(ce.deleteError,a);case 11:return e.prev=11,t.getSavedStates(n),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}})()(e).then(function(){return{delete:"finished"}})})}},{key:"selectState",value:function(e){var t=this;this.allowAbortChanges(function(){var a=t.findState(e);t.setState({currentState:a},function(){var e=t.state.currentState.projectName;t.toastIt(ce.loaded,e),t.calculate()})})}},{key:"allowAbortChanges",value:function(e){var t=this.state,a=t.currentState,n=t.currentState,r=n.projectName,l=n.id;""!==r&&!ie(a,this.findState(l))?S("'".concat(r,"' data has changed, changes will be lost, do you want to continue?"),e):e()}},{key:"handleNew",value:function(e){var a=this;this.allowAbortChanges(function(){e.preventDefault(),a.setState({currentState:t.setDefaultFormData()},function(){return a.calculate()})}),e.target.blur()}},{key:"login",value:function(e){var t=this;this.props.cookies.set("email",e,{path:"/"}),this.setState({userEmail:e},function(){t.toastIt(ce.login,e),t.getSavedStates(!0)})}},{key:"logout",value:function(){var e=this;this.props.cookies.set("email","",{path:"/"}),this.setState({userEmail:""},function(){e.toastIt(ce.logout)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.currency,n=t.savedStates,l=t.currentState,o=t.hasWorkingAPI,s=t.error,c=t.userEmail,i=l.projectName,u=l.postCode,d=o&&""!==i&&""!==u,m=n.Items,p=c.split("@")[1],f=m.length>0&&c?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{data:m,ondelete:this.deleteState,onclick:this.selectState,useremail:c,filter:function(e){return e.email===c},doLogin:this.login}),r.a.createElement("h6",null,"Other saved stuff from"," ".concat(p)),r.a.createElement(V,{data:m,ondelete:this.deleteState,onclick:this.selectState,useremail:c,filter:function(e){return e.email!==c}})):r.a.createElement("div",{style:{float:"left"}},ce.unrecognisedUser.message),h=""!==l.projectName?r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"btn-primary form-control",onClick:function(t){return e.handleNew(t)}},"new"))):"";return Object.keys(l).length>1&&c?r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"column",style:{textAlign:"center"}},r.a.createElement("h5",null,"Property investment deal analyser"),r.a.createElement(j,{name:"propcalc",fields:O,formData:l,twocols:"yes",calculate:this.calculate,currsymbol:a,onsave:this.saveState,showsave:d,error:s}),h),r.a.createElement("div",{className:"column results"},K(this.state)),r.a.createElement("div",{className:"column states"},r.a.createElement("div",{className:"my-stuff"},r.a.createElement("h6",null,"My stuff (",c,")")),r.a.createElement("div",{className:"logout"},r.a.createElement(se,{doLogout:this.logout})),r.a.createElement("div",{className:"saved-list"},f))):r.a.createElement(oe,{doLogin:this.login})}}]),t}(n.Component),me=Object(s.b)(de),pe=Object(c.withToastManager)(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(59);o.a.render(r.a.createElement(function(){return r.a.createElement(s.a,null,r.a.createElement(c.ToastProvider,{autoDismissTimeout:2e3,autoDismiss:!0,placement:"bottom-center"},r.a.createElement(pe,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.0caf872e.chunk.js.map