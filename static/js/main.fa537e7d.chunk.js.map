{"version":3,"sources":["components/common/formConstants.js","logic/calculations/stampduty/stampduty-bands.js","components/common/StatelessFormComponents.jsx","components/form/FormComponent.jsx","components/form/formconfig.js","components/saved/SavedStateComponents.jsx","components/results/list/ResultsListComponent.jsx","util/validate-postcode.js","components/results/links/ResultsLinksComponent.jsx","components/results/ResultsComponent.jsx","logic/calculations/stampduty/stampduty-calculator.js","logic/calculations/allInputCosts.js","labels/calculations-labels.js","logic/calculations/freeCash.js","logic/calculations/index.jsx","logic/calculations/initialFinance.js","logic/calculations/flip.js","logic/calculations/stressTest.js","components/login/formconfig.js","components/login/LoginComponent.jsx","components/login/LogoutComponent.jsx","components/App.jsx","serviceWorker.js","index.js","Root.jsx"],"names":["percentSign","String","fromCharCode","module","exports","types","NUMBER","TEXT","CHECKBOX","SELECT","EMAIL","currencyPlaceholder","ireland","upto","rate","scotland","load","bands","commercial","england","wales","residential","first","thresholds","limit","concat","currRegEx","RegExp","addCurrencySymbolToLabel","label","currencyCode","currSymbol","replace","Label","_ref","name","doLabelClass","dynamicLabel","type","currency","labelWithCurrency","react_default","a","createElement","className","htmlFor","StatelessComponents","Input","_ref2","onInput","placeholder","defVal","onblur","required","disabled","key","id","onChange","e","autoComplete","value","checked","onBlur","Select","_ref3","options","map","opt","FormColumn","render","fields","Form","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","doLabel","bind","assertThisInitialized","renderFields","renderFieldCols","handleChange","handleSave","calculate","fname","formData","val","Number","isNaN","parseFloat","preventDefault","onsave","target","blur","_this2","formFields","_this$props","currsymbol","disable","regex","whenField","test","forEach","field","ob","objectSpread","n","l","some","push","arrLength","Math","floor","length","left","slice","right","splice","_this$props2","twocols","button","showsave","onClick","Component","handleClick","callback","split","SavedStateListItem","milis","ondelete","onclick","deletable","firstname","style","width","dateFormat","Date","parseInt","display","SavedStateList","data","onselect","useremail","filter","filteredData","ind","projectName","email","SavedStateComponents_SavedStateListItem","ListItem","ResultsList","ResultsListComponent_ListItem","postCodeRegEx","validatePostcode","postCode","toUpperCase","urls","rmBuy","process","rmRent","nhpSold","zooSold","otmSold","gMap","Link","href","text","rel","Links","askingPrice","monthlyRent","propertyValue","urlType","stampDutyType","startsWith","oneK","oneHundredK","maxPrice","ceil","maxRent","Fragment","color","fontStyle","Results","currentState","_ref$currentState","dealType","dealFinance","buyToLet","stress","flip","showBTL","showFlip","ResultsListComponent","calculateStampDuty","region","buyer","onePercentOfVal","sdltBands","_sdltBands$type$first","bandLimit","previousBandLimit","tax","idx","allInputCosts","initSurveyorsFee","initLegalFee","initMortgageFee","refurbCost","otherCost","stampDutyRegion","stampDutyBuyer","calculations_labels","calculations","freeCash","loanToValue","doneUpValue","mortgageInterestRatePercent","moePercent","agentsPercent","remortgageFee","remortgageValuationFee","remortgageLegalFee","repairingLease","isRepairing","loanToVal","remortgageAdvance","round","remortgageDeposit","remortgageMonthlyInterest","moe","lettingAgentsFees","freeCashFlowMonthly","remortgageFees","initialCost","grossYield","labels","calculationsLabels","toFixed","initialFinance","interest","term","buyingCash","initialLoanToValue","mortgageTerm","isCash","initMortgageAdvance","mortgageMonthlyInterest","monthlyRepayment","pow","initFees","other","initialDeposit","sdltTotal","totCost","totIn","sellingLegalFee","agentSellingFee","fees","flipGain","col","stressTest","mortgageStressInterestRatePercent","mortgageStressMultipePercent","minRent","pass","getCurrencyCode","Login","state","handleSubmit","setState","doLogin","textAlign","onSubmit","Logout","doLogout","require","App","savedStates","Items","hasWorkingAPI","userEmail","cookies","get","saveState","deleteState","selectState","login","logout","defaults","getSavedStates","setDefault","sortByNameThenDate","pNameA","idA","pNameB","idB","fetch","then","response","json","sort","loadState","catch","stateId","find","newState","setDefaultFormData","changedField","newValue","inputData","defineProperty","document","getElementById","_this3","_this$state","_this$state$currentSt","stateToSave","method","headers","Accept","Content-Type","body","JSON","stringify","finally","error","_this4","resp","ok","Error","_this5","selectedState","findState","_this6","_this7","set","path","_this8","_this$state2","showSave","savedList","SavedStateComponents","o","float","newButton","event","handleNew","keys","FormComponent","LogoutComponent","LoginComponent","withCookies","Boolean","window","location","hostname","match","ReactDOM","es6","components_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fa537e7d.chunk.js","sourcesContent":["const types = {\n  NUMBER: 'number',\n  TEXT: 'text',\n  CHECKBOX: 'checkbox',\n  SELECT: 'select',\n  EMAIL: 'email',\n};\n\nconst currencyPlaceholder = '##CURR##';\nconst percentSign = String.fromCharCode(37);\n\nmodule.exports = {\n  types,\n  currencyPlaceholder,\n  percentSign,\n};\n","const ireland = [\n  { upto: 1000000, rate: 1 },\n  { upto: 'end', rate: 2 },\n];\nconst scotland = [{ upto: 250000, rate: 2, load: 3 },\n  { upto: 325000, rate: 5, load: 3 },\n  { upto: 750000, rate: 10, load: 3 },\n  { upto: 'end', rate: 12, load: 3 },\n];\nconst bands = {\n  commercial: {\n    england: [\n      { upto: 150000, rate: 0 },\n      { upto: 250000, rate: 2 },\n      { upto: 'end', rate: 5 },\n    ],\n    wales: [\n      { upto: 150000, rate: 0 },\n      { upto: 250000, rate: 1 },\n      { upto: 1000000, rate: 5 },\n      { upto: 'end', rate: 6 },\n    ],\n    scotland: [\n      { upto: 150000, rate: 0 },\n      { upto: 250000, rate: 1 },\n      { upto: 'end', rate: 5 },\n    ],\n    ireland,\n  },\n\n  residential: {\n    first: {\n      england: {\n        thresholds: [\n          { upto: 300000, rate: 0 },\n          { upto: 500000, rate: 5 },\n        ],\n        limit: 500000,\n      },\n      scotland: {\n        thresholds: [\n          { upto: 175000, rate: 0 },\n          ...scotland,\n        ],\n        limit: -1,\n      },\n    },\n    england: [\n      { upto: 125000, rate: 0, load: 3 },\n      { upto: 250000, rate: 2, load: 3 },\n      { upto: 925000, rate: 5, load: 3 },\n      { upto: 1500000, rate: 10, load: 3 },\n      { upto: 'end', rate: 12, load: 3 },\n    ],\n    wales: [\n      { upto: 180000, rate: 0, load: 3 },\n      { upto: 250000, rate: 3.5, load: 3 },\n      { upto: 400000, rate: 5, load: 3 },\n      { upto: 750000, rate: 7.5, load: 3 },\n      { upto: 1500000, rate: 10, load: 3 },\n      { upto: 'end', rate: 12, load: 3 },\n    ],\n    scotland: [\n      { upto: 145000, rate: 0, load: 3 },\n      ...scotland,\n    ],\n    ireland,\n  },\n};\n\nmodule.exports = bands;\n","import React from 'react';\nimport { currencyPlaceholder } from './formConstants';\n\nconst PropTypes = require('prop-types');\n\nconst basePropTypes = {\n  name: PropTypes.string.isRequired,\n  doLabelClass: PropTypes.func.isRequired,\n  dynamicLabel: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  currency: PropTypes.number.isRequired,\n};\nconst formControlPropTypes = {\n  className: PropTypes.string.isRequired,\n  onInput: PropTypes.func.isRequired,\n  defVal: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onblur: PropTypes.func.isRequired,\n  options: PropTypes.arrayOf(PropTypes.object).isRequired,\n  disabled: PropTypes.bool.isRequired,\n};\nconst currRegEx = new RegExp(currencyPlaceholder, 'g');\n\nconst addCurrencySymbolToLabel = (label, currencyCode) => {\n  const currSymbol = String.fromCharCode(currencyCode);\n  return label.replace(currRegEx, currSymbol);\n};\n\n// stateless component Label\nfunction Label({\n  name, doLabelClass, dynamicLabel, label, type, currency,\n}) {\n  const labelWithCurrency = addCurrencySymbolToLabel(label, currency);\n\n  return (\n    <div className={type === 'checkbox' ? 'checkbox-label' : 'input-label'}>\n      <label\n        htmlFor={name}\n        className={doLabelClass(name)}\n      >\n        {dynamicLabel(name, labelWithCurrency)}\n      </label>\n    </div>\n  );\n}\n\nLabel.propTypes = {\n  ...basePropTypes,\n};\n\nfunction Input({\n  className, name, type, onInput,\n  placeholder, label, defVal, onblur,\n  doLabelClass, dynamicLabel, currency, required, disabled,\n}) {\n  const labelWithCurrency = addCurrencySymbolToLabel(label, currency);\n\n  return (\n    <li key={name}>\n      <input\n        className={className || 'form-control'}\n        key={name}\n        type={type}\n        name={name}\n        id={name}\n        onChange={e => onInput(e)}\n        autoComplete=\"off\"\n        placeholder={placeholder || labelWithCurrency || `${name} [${type}]`}\n        value={defVal || ''}\n        checked={defVal === 'yes'}\n        onBlur={e => onblur(e)}\n        required={required || false}\n        disabled={disabled}\n      />\n      {Label({\n        name, doLabelClass, dynamicLabel, label, type, currency,\n      })}\n    </li>\n  );\n}\n\nInput.propTypes = {\n  ...basePropTypes,\n  ...formControlPropTypes,\n  placeholder: PropTypes.string.isRequired,\n  required: PropTypes.bool.isRequired,\n};\n\n// stateless component Select\nfunction Select({\n  className, name, type, onInput, label, defVal, onblur,\n  options, doLabelClass, dynamicLabel, disabled,\n}) {\n  return (\n    <li key={name}>\n      <select\n        value={defVal}\n        className={className || 'form-control'}\n        key={name}\n        name={name}\n        id={name}\n        onChange={e => onInput(e)}\n        onBlur={e => onblur(e)}\n        disabled={disabled}\n      >\n        {options.map(\n          opt => (\n            <option\n              key={opt.value}\n              name={opt.name}\n              value={opt.value}\n            >\n              {opt.name}\n            </option>\n          ),\n        )}\n      </select>\n      {Label({\n        name, doLabelClass, dynamicLabel, label, type,\n      })}\n    </li>\n  );\n}\n\nSelect.propTypes = {\n  ...basePropTypes,\n  ...formControlPropTypes,\n};\n\nconst StatelessComponents = {\n  Input,\n  Select,\n};\n\nexport default StatelessComponents;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport StatelessComponents from '../common/StatelessFormComponents';\nimport { types } from '../common/formConstants';\n\nconst PropTypes = require('prop-types');\n\nconst { Input, Select } = StatelessComponents;\n\nfunction FormColumn({ render, fields, className }) {\n  return (\n    <ul className={className}>\n      {render(fields)}\n    </ul>\n  );\n}\n\nFormColumn.propTypes = {\n  render: PropTypes.func.isRequired,\n  fields: PropTypes.arrayOf(PropTypes.object).isRequired,\n  className: PropTypes.string.isRequired,\n};\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    this.doLabel = this.doLabel.bind(this);\n    this.doLabelClass = this.doLabelClass.bind(this);\n    this.renderFields = this.renderFields.bind(this);\n    this.renderFieldCols = this.renderFieldCols.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  componentDidMount() {\n    const { calculate } = this.props;\n    calculate();\n  }\n\n  doLabel(fname, label) {\n    const { formData } = this.props;\n    return formData && formData[fname] ? label || fname : '';\n  }\n\n  doLabelClass(fname) {\n    const { formData } = this.props;\n    return formData && formData[fname] ? 'show' : 'hide';\n  }\n\n  handleChange({\n    type,\n    value,\n    checked,\n    name,\n  }) {\n    const { props } = this;\n    let val;\n\n    switch (type) {\n      case types.NUMBER:\n        val = Number.isNaN(value) ? 0 : (parseFloat(value) || 0);\n        break;\n      case types.CHECKBOX:\n        val = checked ? 'yes' : 'no';\n        break;\n      default:\n        val = value || '';\n    }\n\n    props.calculate(name, val);\n  }\n\n  handleSave(e) {\n    e.preventDefault();\n    const { onsave } = this.props;\n    onsave();\n    e.target.blur();\n  }\n\n  renderFields(fields) {\n    const formFields = [];\n    const { currsymbol, formData } = this.props;\n    const disable = ({ regex, whenField }) => regex.test(formData[whenField]);\n\n    fields.forEach((field) => {\n      const ob = { ...field };\n      ob.dynamicLabel = (n, l) => this.doLabel(n, l);\n      ob.doLabelClass = n => this.doLabelClass(n);\n      ob.onInput = e => this.handleChange(e.target);\n      ob.onblur = e => this.handleChange(e.target);\n      ob.currency = currsymbol;\n      ob.defVal = formData[ob.name];\n      ob.disabled = ob.disabled && ob.disabled.some(disable);\n      if (ob.type === 'select') {\n        formFields.push(Select(ob));\n      } else {\n        formFields.push(Input(ob));\n      }\n    });\n    return formFields;\n  }\n\n  renderFieldCols() {\n    const { fields } = this.props;\n    const arrLength = Math.floor(fields.length / 2);\n    const left = fields.slice(0);\n    const right = left.splice(arrLength);\n\n    return [\n      <FormColumn\n        key=\"1\"\n        fields={left}\n        className=\"left\"\n        render={this.renderFields}\n      />,\n      <FormColumn\n        key=\"2\"\n        fields={right}\n        className=\"right\"\n        render={this.renderFields}\n      />,\n    ];\n  }\n\n  render() {\n    const {\n      name,\n      twocols,\n      fields,\n      showsave,\n    } = this.props;\n    const button = showsave ? (\n      <ul className=\"left\">\n        <li>\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n            onClick={this.handleSave}\n          >\n            save this\n          </button>\n        </li>\n      </ul>\n    ) : '';\n\n    return (\n      <form\n        name={name}\n        id={name}\n      >\n        {twocols === 'yes' ? this.renderFieldCols() : this.renderFields(fields)}\n        {button}\n      </form>\n    );\n  }\n}\n\nForm.propTypes = {\n  name: PropTypes.string.isRequired,\n  fields: PropTypes.arrayOf(PropTypes.object).isRequired,\n  formData: PropTypes.shape({}).isRequired,\n  twocols: PropTypes.string.isRequired,\n  calculate: PropTypes.func.isRequired,\n  currsymbol: PropTypes.number.isRequired,\n  onsave: PropTypes.func.isRequired,\n  showsave: PropTypes.bool.isRequired,\n};\n\nexport default Form;\n","import { types, currencyPlaceholder, percentSign } from '../common/formConstants';\n\nconst fields = [\n  {\n    label: 'Project name',\n    name: 'projectName',\n    type: types.TEXT,\n    defVal: '',\n    required: true,\n  },\n  {\n    label: 'Post code',\n    name: 'postCode',\n    type: types.TEXT,\n    defVal: '',\n    required: true,\n  },\n  {\n    label: `Asking price(${currencyPlaceholder})`,\n    name: 'askingPrice',\n    type: types.NUMBER,\n    defVal: 0,\n  },\n  {\n    label: `Purchase price(${currencyPlaceholder})`,\n    name: 'propertyValue',\n    type: types.NUMBER,\n    defVal: 0,\n  },\n  {\n    label: `Done up value(${currencyPlaceholder})`,\n    name: 'doneUpValue',\n    type: types.NUMBER,\n    defVal: 0,\n  },\n  {\n    label: 'Cash purchase',\n    name: 'buyingCash',\n    type: types.CHECKBOX,\n    defVal: 'no',\n  },\n  {\n    label: `Initial LTV(${percentSign})`,\n    name: 'initialLoanToValue',\n    type: types.NUMBER,\n    defVal: 75,\n    disabled: [{ whenField: 'buyingCash', regex: /yes/ }],\n  },\n  {\n    label: `Mortgage fee(${currencyPlaceholder})`,\n    name: 'initMortgageFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'buyingCash', regex: /yes/ }],\n  },\n  {\n    label: `Surveyors fee(${currencyPlaceholder})`,\n    name: 'initSurveyorsFee',\n    type: types.NUMBER,\n    defVal: 600,\n  },\n  {\n    label: `Legal fees(${currencyPlaceholder})`,\n    name: 'initLegalFee',\n    type: types.NUMBER,\n    defVal: 1500,\n  },\n  {\n    label: 'Stamp duty type',\n    name: 'stampDutyType',\n    type: types.SELECT,\n    options: [\n      { value: 'residential', name: 'Residential' },\n      { value: 'commercial', name: 'Commercial' },\n    ],\n    defVal: 'residential',\n  },\n  {\n    label: 'Stamp duty region',\n    name: 'stampDutyRegion',\n    type: types.SELECT,\n    options: [\n      { value: 'england', name: 'England/NI' },\n      { value: 'scotland', name: 'Scotland' },\n      { value: 'wales', name: 'Wales' },\n      { value: 'ireland', name: 'Ireland' },\n    ],\n    defVal: 'england',\n  },\n  {\n    label: 'Stamp duty buyer',\n    name: 'stampDutyBuyer',\n    type: types.SELECT,\n    options: [\n      { value: 'investor', name: 'Investor' },\n      { value: 'first', name: 'First time buyer' },\n      { value: 'home', name: 'Moving house' },\n    ],\n    defVal: 'investor',\n    disabled: [{ whenField: 'stampDutyType', regex: /commercial/ }],\n  },\n  {\n    label: `Monthly rent(${currencyPlaceholder})`,\n    name: 'monthlyRent',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: 'Deal type',\n    name: 'dealType',\n    type: types.SELECT,\n    options: [\n      { value: 'btl&flip', name: 'Buy to let and flip' },\n      { value: 'btl', name: 'Buy to let' },\n      { value: 'flip', name: 'Flip' },\n      { value: 'home', name: 'Home only' },\n    ],\n    defVal: 'btl&flip',\n  },\n  {\n    label: `Refurbishment cost(${currencyPlaceholder})`,\n    name: 'refurbCost',\n    type: types.NUMBER,\n    defVal: 0,\n  },\n  {\n    label: `Other cost(${currencyPlaceholder})`,\n    name: 'otherCost',\n    type: types.NUMBER,\n    defVal: 0,\n  },\n  {\n    label: `Remortgage fee(${currencyPlaceholder})`,\n    name: 'remortgageFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Remortgage valuation fee(${currencyPlaceholder})`,\n    name: 'remortgageValuationFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Remortgage legal fees(${currencyPlaceholder})`,\n    name: 'remortgageLegalFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: 'Repairing lease',\n    name: 'repairingLease',\n    type: types.CHECKBOX,\n    defVal: 'no',\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Letting agents rate(${percentSign})`,\n    name: 'agentsPercent',\n    type: types.NUMBER,\n    defVal: 10,\n    disabled: [\n      { whenField: 'dealType', regex: /^((?!btl).)*$/ },\n      { whenField: 'repairingLease', regex: /yes/ },\n    ],\n  },\n  {\n    label: `\n    MOE rate(${percentSign})`,\n    name: 'moePercent',\n    type: types.NUMBER,\n    defVal: 15,\n    disabled: [\n      { whenField: 'dealType', regex: /^((?!btl).)*$/ },\n      { whenField: 'repairingLease', regex: /yes/ },\n    ],\n  },\n  {\n    label: 'Mortgage term',\n    name: 'mortgageTerm',\n    type: types.NUMBER,\n    defVal: 25,\n  },\n  {\n    label: `Interest rate(${percentSign})`,\n    name: 'mortgageInterestRatePercent',\n    type: types.NUMBER,\n    defVal: 6.0,\n  },\n  {\n    label: `Remortgage LTV(${percentSign})`,\n    name: 'loanToValue',\n    type: types.NUMBER,\n    defVal: 75,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Solicitors selling fee(${currencyPlaceholder})`,\n    name: 'sellingLegalFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!flip).)*$/ }],\n  },\n  {\n    label: `Agent/selling fee(${currencyPlaceholder})`,\n    name: 'agentSellingFee',\n    type: types.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!flip).)*$/ }],\n  },\n  {\n    label: `Mortgage stress test(${percentSign})`,\n    name: 'mortgageStressMultipePercent',\n    type: types.NUMBER,\n    defVal: 125,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Stress interest rate(${percentSign})`,\n    name: 'mortgageStressInterestRatePercent',\n    type: types.NUMBER,\n    defVal: 5.0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n];\n\nexport default fields;\n","/* eslint-env browser */\nimport React from 'react';\nimport dateFormat from 'date-format';\n\nconst PropTypes = require('prop-types');\n\nconst handleClick = (e, callback) => {\n  e.preventDefault();\n  e.target.blur();\n  callback(e.target.id.split('-')[1]);\n};\n\nconst showDate = milis => dateFormat('dd/MM hh:mm:ss', new Date(parseInt(milis, 0)));\n\nconst SavedStateListItem = ({\n  label,\n  value,\n  ondelete,\n  onclick,\n  deletable,\n  firstname,\n}) => (\n  <li>\n    <div className=\"state\">\n      <button\n        className=\"btn-primary form-control\"\n        style={{ width: '100%' }}\n        type=\"submit\"\n        id={`select-${value}`}\n        onClick={e => handleClick(e, onclick)}\n      >\n        {`${label} (${showDate(value)}${deletable ? '' : ` ${firstname}`})`}\n      </button>\n    </div>\n    <div className=\"remove-state\">\n      <button\n        className=\"btn-sm btn-primary btn-warning\"\n        type=\"submit\"\n        id={`delete-${value}`}\n        onClick={e => handleClick(e, ondelete)}\n        style={{ display: deletable ? '' : 'none' }}\n      >\n        delete\n      </button>\n    </div>\n  </li>\n);\n\nSavedStateListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  ondelete: PropTypes.func.isRequired,\n  onclick: PropTypes.func.isRequired,\n  deletable: PropTypes.bool.isRequired,\n  firstname: PropTypes.string.isRequired,\n};\n\nconst SavedStateList = ({\n  data,\n  ondelete,\n  onselect,\n  onclick,\n  useremail,\n  filter,\n}) => {\n  if (data.map) {\n    const filteredData = data.filter(filter);\n    return (\n      <ul>\n        {filteredData.map(({ projectName, id, email }, ind) => {\n          const key = `li-${id}-${ind}`;\n          return (\n            <SavedStateListItem\n              ondelete={ondelete}\n              key={`li-${key}`}\n              label={projectName || 'untitled'}\n              value={id}\n              onselect={onselect}\n              onclick={onclick}\n              deletable={useremail === email}\n              firstname={email.split('@')[0].split('.')[0]}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n  return '';\n};\n\nSavedStateList.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.object),\n  ondelete: PropTypes.func.isRequired,\n  onselect: PropTypes.func,\n  onclick: PropTypes.func.isRequired,\n  useremail: PropTypes.string.isRequired,\n  filter: PropTypes.func,\n};\n\nexport default SavedStateList;\n","/* eslint react/prop-types: 0 */\n// eslint-disable-next-line\nimport React from 'react';\n\nconst ListItem = ({ label, value }) => (\n  <li>\n    <div className=\"label\">{label}</div>\n    <div className=\"value\">{value}</div>\n  </li>\n);\n\nconst ResultsList = ({ data, id }) => (data ? (\n  <ul>\n    {data.map(({ label, value }, ind) => {\n      const key = `li-${id}-${ind}`;\n      return <ListItem key={`li-${key}`} label={label} value={value} />;\n    })}\n  </ul>\n) : '');\n\nexport default ResultsList;\n","// postcode validation regex\nconst postCodeRegEx = /^(GIR[ ]?0AA|((AB|AL|B|BA|BB|BD|BH|BL|BN|BR|BS|BT|CA|CB|CF|CH|CM|CO|CR|CT|CV|CW|DA|DD|DE|DG|DH|DL|DN|DT|DY|E|EC|EH|EN|EX|FK|FY|G|GL|GY|GU|HA|HD|HG|HP|HR|HS|HU|HX|IG|IM|IP|IV|JE|KA|KT|KW|KY|L|LA|LD|LE|LL|LN|LS|LU|M|ME|MK|ML|N|NE|NG|NN|NP|NR|NW|OL|OX|PA|PE|PH|PL|PO|PR|RG|RH|RM|S|SA|SE|SG|SK|SL|SM|SN|SO|SP|SR|SS|ST|SW|SY|TA|TD|TF|TN|TQ|TR|TS|TW|UB|W|WA|WC|WD|WF|WN|WR|WS|WV|YO|ZE)(\\d[\\dA-Z]?[ ]?\\d[ABD-HJLN-UW-Z]{2}))|BFPO[ ]?\\d{1,4})$/;\n\nconst validatePostcode = postCode => postCodeRegEx.test(postCode.toUpperCase());\n\nexport default validatePostcode;\n","import React from 'react';\nimport validatePostcode from '../../../util/validate-postcode';\n\nconst PropTypes = require('prop-types');\n\nconst urls = {\n  rmBuy: {\n    commercial: process.env.REACT_APP_RM_COM_BUY_URL,\n    residential: process.env.REACT_APP_RM_BUY_URL,\n  },\n  rmRent: {\n    commercial: process.env.REACT_APP_RM_COM_LET_URL,\n    residential: process.env.REACT_APP_RM_LET_URL,\n  },\n  nhpSold: process.env.REACT_APP_NHP_SOLD_URL,\n  zooSold: process.env.REACT_APP_ZOO_SOLD_URL,\n  otmSold: process.env.REACT_APP_OTM_SOLD_URL,\n  gMap: process.env.REACT_APP_MAP_URL,\n};\n\nfunction Link({ href, text }) {\n  return (\n    <a\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      href={href}\n    >\n      {text}\n    </a>\n  );\n}\n\nLink.propTypes = {\n  href: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n};\n\nfunction Links(\n  {\n    postCode,\n    askingPrice,\n    monthlyRent,\n    propertyValue,\n    stampDutyType,\n  },\n) {\n  const urlType = stampDutyType.startsWith('commercial') ? 'commercial' : 'residential';\n  const { oneK, oneHundredK } = { oneK: 1000, oneHundredK: 100000 };\n  const maxPrice = Math\n    .ceil((askingPrice || propertyValue || 400000) / oneHundredK * 1.2) * oneHundredK;\n  const maxRent = Math.ceil((monthlyRent || oneK) / oneK * 1.2) * oneK;\n\n  return (postCode && validatePostcode(postCode)) ? (\n    <React.Fragment>\n      sold:\n      {' '}\n      <Link\n        href={urls.nhpSold + postCode}\n        text=\"NHP\"\n      />\n      {':'}\n      <Link\n        href={urls.zooSold + postCode}\n        text=\"Zoopla\"\n      />\n      {':'}\n      <Link\n        href={urls.otmSold + postCode}\n        text=\"OTM\"\n      />\n      {' | '}\n      <Link\n        href={`${urls.rmBuy[urlType] + postCode}&maxPrice=${(maxPrice)}`}\n        text=\"for sale\"\n      />\n      {' | '}\n      <Link\n        href={`${urls.rmRent[urlType] + postCode}&maxPrice=${maxRent}`}\n        text=\"to let\"\n      />\n      {' | '}\n      <Link\n        href={urls.gMap + postCode}\n        text=\"gmap\"\n      />\n    </React.Fragment>\n  ) : <span style={{ color: 'red', fontStyle: 'italic' }}>use a full valid post code to see links here</span>;\n}\n\nLinks.propTypes = {\n  postCode: PropTypes.string.isRequired,\n  askingPrice: PropTypes.string.isRequired,\n  monthlyRent: PropTypes.number.isRequired,\n  propertyValue: PropTypes.number.isRequired,\n  stampDutyType: PropTypes.string.isRequired,\n};\n\nexport default Links;\n","import React from 'react';\nimport ResultsList from './list/ResultsListComponent';\nimport Links from './links/ResultsLinksComponent';\nimport validatePostcode from '../../util/validate-postcode';\n\nconst PropTypes = require('prop-types');\n\nfunction Results({ data, currentState, currentState: { postCode, dealType } }) {\n  const {\n    dealFinance,\n    buyToLet,\n    stress,\n    flip,\n  } = data;\n  const showBTL = /btl/.test(dealType);\n  const showFlip = /flip/.test(dealType);\n\n  return (\n    <React.Fragment>\n      <div className=\"res-block\" style={{ display: validatePostcode(postCode) ? '' : 'none' }}>\n        <h6>Links for this post code</h6>\n        {Links(currentState)}\n      </div>\n      <div className=\"res-block\">\n        <h6>Deal finance</h6>\n        <ResultsList id=\"1\" data={dealFinance} />\n      </div>\n      <div className=\"res-block\" style={{ display: showBTL ? '' : 'none' }}>\n        <h6>Buy to let</h6>\n        <ResultsList id=\"2\" data={buyToLet || ''} />\n      </div>\n      <div className=\"res-block\" style={{ display: showBTL ? '' : 'none' }}>\n        <h6>Stress test</h6>\n        <ResultsList id=\"3\" data={stress || ''} />\n      </div>\n      <div className=\"res-block\" style={{ display: showFlip ? '' : 'none' }}>\n        <h6>Flip</h6>\n        <ResultsList id=\"4\" data={flip} />\n      </div>\n    </React.Fragment>\n  );\n}\n\nResults.propTypes = {\n  data: PropTypes.shape({\n    dealFinance: PropTypes.arrayOf(PropTypes.object).isRequired,\n    buyToLet: PropTypes.arrayOf(PropTypes.object),\n    stress: PropTypes.arrayOf(PropTypes.object),\n    flip: PropTypes.arrayOf(PropTypes.object),\n  }).isRequired,\n  currentState: PropTypes.shape({\n    postCode: PropTypes.string,\n    dealType: PropTypes.string,\n  }).isRequired,\n};\n\nexport default Results;\n","import sdltBands from './stampduty-bands';\n\nconst calculateStampDuty = (val, type, region, buyer) => {\n  const onePercentOfVal = (val / 100);\n  let bands = sdltBands[type][region];\n  if (buyer === 'first' && type === 'residential' && !/^ireland$|^wales$/.test(region)) {\n    const { limit, thresholds } = sdltBands[type].first[region];\n    if (limit === -1 || val <= limit) {\n      bands = thresholds;\n    }\n  }\n\n  let tax = 0;\n  let bandLimit;\n  let previousBandLimit;\n  let load;\n\n  if (!type || !region) return 0;\n\n  for (let idx = 0; idx < bands.length; idx += 1) {\n    load = buyer === 'investor' ? (bands[idx].load || 0) : 0;\n\n    bandLimit = bands[idx].upto;\n    const { rate } = bands[idx];\n    previousBandLimit = idx > 0 ? bands[idx - 1].upto : 0;\n\n    if (bandLimit === 'end') { // end and return\n      tax += ((onePercentOfVal - (previousBandLimit / 100)) * (rate + load));\n      return tax;\n    }\n    if (val <= bandLimit) { // return before end\n      if (idx === 0) { // below first limit\n        tax += (onePercentOfVal * (rate + load));\n      } else { // below this limit\n        tax += ((onePercentOfVal - (previousBandLimit / 100)) * (rate + load));\n      }\n      return tax;\n    }\n    // add the tax rate for the whole band and carry on\n    tax += ((bandLimit - previousBandLimit) / 100 * (rate + load));\n  }\n  // shouldn't get here but code won't know should throw error\n  // console.error(`check stampduty-test-bands for property without upto: 'end' in last entry`);\n  return tax;\n};\n\nexport default calculateStampDuty;\n","import calculateStampDuty from './stampduty/stampduty-calculator';\n\nconst allInputCosts = (\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  propertyValue,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n) => {\n  const stampDuty = calculateStampDuty(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n\n  return (\n    initSurveyorsFee\n    + initLegalFee\n    + initMortgageFee\n    + refurbCost\n    + otherCost\n    + stampDuty\n    + propertyValue\n  );\n};\n\nexport default allInputCosts;\n","const freeCashLabels = [\n  'Remortgage advance',\n  'Remortgage deposit',\n  'Remortgage fees',\n  'Money in',\n  'Money out',\n  'Money left in',\n  'Monthly rental',\n  'Monthly mortgage payment',\n  'MOE',\n  'Letting agent fees',\n  'Monthly free cashflow',\n  'Gross yield',\n];\n\nconst initialFinanceLabels = [\n  'Mortgage advance',\n  'Deposit',\n  'Stamp duty',\n  'Professional fees',\n  'Refurb/other costs',\n  'Total money in',\n  'Total cost',\n  'Interest only mortgage (monthly)',\n  'Repayment mortgage (monthly)',\n];\n\nconst flipLabels = [\n  'Sale price',\n  'Selling costs',\n  'Total input costs',\n  'Profit (before tax)',\n  'Gain(%)',\n];\n\nconst stressLabels = [\n  'Stress test',\n  'Minimum rent'];\n\nexport default {\n  freeCashLabels,\n  initialFinanceLabels,\n  flipLabels,\n  stressLabels,\n};\n","import calculateStampDuty from './stampduty/stampduty-calculator';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst percentSign = String.fromCharCode(37);\nconst freeCash = ({\n  loanToValue,\n  propertyValue,\n  doneUpValue,\n  mortgageInterestRatePercent,\n  monthlyRent,\n  moePercent,\n  agentsPercent,\n  refurbCost,\n  otherCost,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  remortgageFee,\n  remortgageValuationFee,\n  remortgageLegalFee,\n  initMortgageFee,\n  initLegalFee,\n  initSurveyorsFee,\n  repairingLease,\n}) => {\n  const isRepairing = repairingLease === 'yes';\n  const loanToVal = loanToValue / 100;\n  const remortgageAdvance = Math.round(doneUpValue * loanToVal);\n  const remortgageDeposit = Math.round(doneUpValue * (1 - loanToVal));\n  const remortgageMonthlyInterest = Math\n    .round(remortgageAdvance * mortgageInterestRatePercent / 1200);\n  const moe = isRepairing ? 0 : (monthlyRent * moePercent / 100);\n  const lettingAgentsFees = isRepairing ? 0 : (monthlyRent * agentsPercent / 100);\n  const freeCashFlowMonthly = monthlyRent - (repairingLease === 'yes' ? 0 : moe) - remortgageMonthlyInterest - lettingAgentsFees;\n  const totalOtherCosts = refurbCost + otherCost;\n  const sdltTotal = calculateStampDuty(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n  const remortgageFees = remortgageFee + remortgageValuationFee + remortgageLegalFee;\n  const initialFees = initMortgageFee + initLegalFee + initSurveyorsFee;\n  const initialCost = initialFees + totalOtherCosts + sdltTotal + propertyValue;\n  const grossYield = (monthlyRent * 1200) / initialCost;\n  const labels = calculationsLabels.freeCashLabels;\n\n  return [\n    { label: labels[0], value: remortgageAdvance.toFixed(2) },\n    { label: labels[1], value: remortgageDeposit.toFixed(2) },\n    { label: labels[2], value: remortgageFees.toFixed(2) },\n    { label: labels[3], value: initialCost.toFixed(2) },\n    { label: labels[4], value: (remortgageAdvance - remortgageFees).toFixed(2) },\n    { label: labels[5], value: (initialCost - (remortgageAdvance - remortgageFees)).toFixed(2) },\n    { label: labels[6], value: monthlyRent.toFixed(2) },\n    { label: labels[7], value: remortgageMonthlyInterest.toFixed(2) },\n    { label: labels[8], value: moe.toFixed(2) },\n    { label: labels[9], value: lettingAgentsFees.toFixed(2) },\n    { label: labels[10], value: freeCashFlowMonthly.toFixed(2) },\n    { label: labels[11], value: grossYield.toFixed(2) + percentSign },\n  ];\n};\n\nexport default freeCash;\n","import allInputCosts from './allInputCosts';\nimport freeCash from './freeCash';\nimport initialFinance from './initialFinance';\nimport flip from './flip';\nimport stressTest from './stressTest';\n\nconst getCurrencyCode = ({ stampDutyRegion }) => (stampDutyRegion === 'ireland' ? 8364 : 163);\n\nconst calculations = {\n  freeCash,\n  initialFinance,\n  flip,\n  allInputCosts,\n  stressTest,\n  getCurrencyCode,\n};\n\nexport default calculations;\n","import calculateStampDuty from './stampduty/stampduty-calculator';\nimport allInputCosts from './allInputCosts';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst repaymentCalc = (principal, interest, term) => (\n  (interest / 100 / 12) * principal) / (1 - ((1 + (interest / 100 / 12)) ** (-term * 12))\n);\nconst initialFinance = ({\n  buyingCash,\n  initialLoanToValue,\n  mortgageInterestRatePercent,\n  propertyValue,\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  mortgageTerm,\n}) => {\n  const isCash = buyingCash === 'yes';\n  const loanToVal = initialLoanToValue / 100;\n  const initMortgageAdvance = isCash ? 0 : Math.round(propertyValue * loanToVal);\n  const mortgageMonthlyInterest = Math\n    .round(initMortgageAdvance * mortgageInterestRatePercent / 1200);\n  const monthlyRepayment = repaymentCalc(\n    initMortgageAdvance, mortgageInterestRatePercent, mortgageTerm,\n  );\n  const initFees = initSurveyorsFee + initLegalFee + initMortgageFee;\n  const other = refurbCost + otherCost;\n  const initialDeposit = isCash ? propertyValue : Math.round(propertyValue * (1 - loanToVal));\n  const sdltTotal = calculateStampDuty(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n  const totCost = allInputCosts(initSurveyorsFee, initLegalFee, initMortgageFee,\n    refurbCost, otherCost, propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer);\n  const totIn = totCost - initMortgageAdvance;\n  const labels = calculationsLabels.initialFinanceLabels;\n\n  return [\n    { label: labels[0], value: initMortgageAdvance.toFixed(2) },\n    { label: labels[1], value: initialDeposit.toFixed(2) },\n    { label: labels[2], value: sdltTotal.toFixed(2) },\n    { label: labels[3], value: initFees.toFixed(2) },\n    { label: labels[4], value: other.toFixed(2) },\n    { label: labels[5], value: totIn.toFixed(2) },\n    { label: labels[6], value: totCost.toFixed(2) },\n    { label: labels[7], value: mortgageMonthlyInterest.toFixed(2) },\n    { label: labels[8], value: monthlyRepayment.toFixed(2) },\n  ];\n};\n\nexport default initialFinance;\n","import allInputCosts from './allInputCosts';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst flip = ({\n  sellingLegalFee,\n  agentSellingFee,\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  propertyValue,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  doneUpValue,\n}) => {\n  const totCost = allInputCosts(initSurveyorsFee, initLegalFee, initMortgageFee,\n    refurbCost, otherCost, propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer);\n\n  const fees = sellingLegalFee + agentSellingFee;\n  const flipGain = Math.round((doneUpValue - totCost) / totCost * 10000) / 100;\n  const col = (flipGain >= 20) ? 'green' : 'red';\n  const labels = calculationsLabels.flipLabels;\n\n  return [\n    { label: labels[0], value: doneUpValue.toFixed(2) },\n    { label: labels[1], value: fees.toFixed(2) },\n    { label: labels[2], value: totCost.toFixed(2) || '0' },\n    { label: labels[3], value: ((doneUpValue - (totCost + fees)).toFixed(2) || '0'), col },\n    { label: labels[4], value: flipGain.toFixed(2) || 0, col },\n  ];\n};\n\nexport default flip;\n","import calculationsLabels from '../../labels/calculations-labels';\n\nconst stressTest = ({\n  doneUpValue,\n  monthlyRent,\n  loanToValue,\n  mortgageStressInterestRatePercent,\n  mortgageStressMultipePercent,\n}) => {\n  const minRent = Math.ceil(\n    doneUpValue\n    * loanToValue / 100\n    * mortgageStressInterestRatePercent / 1200\n    * mortgageStressMultipePercent / 100,\n  );\n  const pass = monthlyRent >= minRent;\n  const labels = calculationsLabels.stressLabels;\n\n  return [\n    { label: labels[0], value: pass ? 'pass' : 'fail' },\n    { label: labels[1], value: minRent.toFixed(2) },\n  ];\n};\n\nexport default stressTest;\n","import { types } from '../common/formConstants';\n\nconst field = {\n  label: 'User',\n  name: 'userEmail',\n  type: types.EMAIL,\n  defVal: '',\n  required: true,\n};\n\nexport default field;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport field from './formconfig';\n\nconst PropTypes = require('prop-types');\n\nconst { name, type, label } = field;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({ email: e.target.value });\n  }\n\n  handleSubmit(e) {\n    const { props: { doLogin }, state: { email } } = this;\n    e.preventDefault();\n    if (email) {\n      doLogin(email);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"column\" style={{ textAlign: 'center' }}>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            className=\"form-control\"\n            key={name}\n            type={type}\n            name={name}\n            id={name}\n            autoComplete=\"off\"\n            placeholder={`${label} [${type}]`}\n            onChange={this.handleChange}\n            onBlur={this.handleChange}\n            required\n          />\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n          >\n            go\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  doLogin: PropTypes.func.isRequired,\n};\n\nexport default Login;\n","import React from 'react';\n\nconst PropTypes = require('prop-types');\n\nfunction Logout({ doLogout }) {\n  const handleClick = (e) => {\n    e.preventDefault();\n    doLogout();\n  };\n\n  return (\n    <button\n      type=\"submit\"\n      className=\"\"\n      onClick={handleClick}\n    >\n      logoff\n    </button>\n  );\n}\n\nLogout.propTypes = {\n  doLogout: PropTypes.func.isRequired,\n};\n\nexport default Logout;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport { withCookies, Cookies } from 'react-cookie';\nimport Form from './form/FormComponent';\nimport fields from './form/formconfig';\nimport '../css/app.css';\nimport SavedStateList from './saved/SavedStateComponents';\nimport Results from './results/ResultsComponent';\nimport calculations from '../logic/calculations';\nimport Login from './login/LoginComponent';\nimport Logout from './login/LogoutComponent';\n\nconst PropTypes = require('prop-types');\n\nconst urls = {\n  comparisons: process.env.REACT_APP_COMPARISONS_URL,\n};\n\nclass App extends Component {\n  static setDefaultFormData() {\n    const defaults = {};\n    fields.map((ob) => {\n      defaults[ob.name] = ob.defVal;\n      return false;\n    });\n    return defaults;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        dealFinance: [],\n        buyToLet: [],\n        stress: [],\n        flip: [],\n      },\n      currency: 163,\n      savedStates: { Items: [] },\n      currentState: { projectName: '' },\n      hasWorkingAPI: false,\n      userEmail: props.cookies.get('email') || '',\n    };\n    this.calculate = this.calculate.bind(this);\n    this.saveState = this.saveState.bind(this);\n    this.deleteState = this.deleteState.bind(this);\n    this.selectState = this.selectState.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  componentDidMount() {\n    const { userEmail } = this.state;\n    if (userEmail !== '') {\n      this.getSavedStates(true);\n    }\n  }\n\n  getSavedStates(setDefault) {\n    const sortByNameThenDate = (\n      { projectName: pNameA, id: idA },\n      { projectName: pNameB, id: idB },\n    ) => {\n      if ((pNameA + idA) < (pNameB + idB)) return -1;\n      if ((pNameA + idA) > (pNameB + idB)) return 1;\n      return 0;\n    };\n    const { userEmail } = this.state;\n\n    fetch(`${urls.comparisons}/user/${userEmail}`)\n      .then(response => response.json())\n      .then((data) => {\n        if (data.Items.length > 0) {\n          data.Items.sort(sortByNameThenDate);\n        }\n        this.loadState(data, setDefault);\n      })\n      .catch(() => {\n        this.loadState(null, true);\n      });\n  }\n\n  findState(stateId) {\n    const { savedStates } = this.state;\n    return savedStates.Items.find(state => state.id === stateId);\n  }\n\n  loadState(data, setDefault) {\n    const { userEmail } = this.state;\n    const newState = {\n      savedStates: data || { Items: [] },\n      hasWorkingAPI: !!data,\n    };\n\n    if (setDefault) {\n      newState.currentState = App.setDefaultFormData();\n    }\n\n    if (userEmail && newState.currentState) {\n      newState.currentState.email = userEmail;\n    }\n\n    this.setState(newState);\n  }\n\n  calculate(changedField, newValue) {\n    const { currentState } = this.state;\n    const inputData = (changedField)\n      ? { ...currentState, [changedField]: newValue } : currentState;\n    const dealFinance = calculations.initialFinance(inputData);\n    const buyToLet = calculations.freeCash(inputData);\n    const flip = calculations.flip(inputData);\n    const stress = calculations.stressTest(inputData);\n    const currSymbol = calculations.getCurrencyCode(inputData);\n\n    document.getElementById('doc-title').text = inputData.projectName.replace(/ /g, '-');\n\n    const newState = {\n      data: {\n        dealFinance,\n        buyToLet,\n        stress,\n        flip,\n      },\n      currency: currSymbol,\n    };\n\n    if (changedField) {\n      newState.currentState = inputData;\n    }\n\n    this.setState(newState);\n  }\n\n  saveState() {\n    const { currentState, currentState: { projectName, postCode }, userEmail } = this.state;\n    if (projectName === '' || postCode === '') {\n      return;\n    }\n    const stateToSave = { ...currentState, email: userEmail };\n    fetch(urls.comparisons, {\n      method: 'PUT',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(stateToSave),\n    })\n      .then(response => response.json())\n      .then(() => {\n        this.getSavedStates(false);\n      })\n      .catch(() => this.setState({ savedStates: { Items: 'No save service available' } }))\n      .finally(() => {\n        this.setState({ error: null });\n      });\n  }\n\n  deleteState(stateId) {\n    const { userEmail } = this.state;\n    fetch(urls.comparisons, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ id: stateId, email: userEmail }),\n    })\n      .then((resp) => {\n        if (resp.ok) {\n          const { currentState: id } = this.state;\n          this.getSavedStates(stateId === id);\n        } else {\n          throw new Error('delete failed');\n        }\n      }).catch(() => this.setState({ savedStates: { Items: 'No delete service avaialable' } }));\n  }\n\n  selectState(stateId) {\n    const selectedState = this.findState(stateId);\n    this.setState({ currentState: selectedState }, () => this.calculate());\n  }\n\n  handleNew(e) {\n    e.preventDefault();\n    this.setState(\n      { currentState: App.setDefaultFormData() }, () => this.calculate(),\n    );\n    e.target.blur();\n  }\n\n  login(email) {\n    const { cookies } = this.props;\n    cookies.set('email', email, { path: '/' });\n    this.setState({ userEmail: email }, () => {\n      this.getSavedStates(true);\n    });\n  }\n\n  logout() {\n    const { cookies } = this.props;\n    cookies.set('email', '', { path: '/' });\n    this.setState({ userEmail: '' });\n  }\n\n  render() {\n    const {\n      currency,\n      savedStates,\n      currentState,\n      hasWorkingAPI,\n      error,\n      userEmail,\n    } = this.state;\n    const { projectName, postCode } = currentState;\n    const showSave = (\n      hasWorkingAPI\n      && projectName !== ''\n      && postCode !== ''\n    );\n    const { Items } = savedStates;\n    const savedList = Items.length > 0 && userEmail ? (\n      <React.Fragment>\n        <SavedStateList\n          data={Items}\n          ondelete={this.deleteState}\n          onclick={this.selectState}\n          useremail={userEmail}\n          filter={o => o.email === userEmail}\n          doLogin={this.login}\n        />\n        <h6>Other saved stuff</h6>\n        <SavedStateList\n          data={Items}\n          ondelete={this.deleteState}\n          onclick={this.selectState}\n          useremail={userEmail}\n          filter={o => o.email !== userEmail}\n        />\n      </React.Fragment>\n    )\n      : (\n        <div style={{ float: 'left' }}>\n          You need to be whitelisted to use the view and save functions.\n          You can still use the app to perform calculations which can be printed,\n          if you want to save copies.\n        </div>\n      );\n    const newButton = currentState.projectName !== '' ? (\n      <ul className=\"right\">\n        <li>\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n            onClick={event => this.handleNew(event)}\n          >\n            new\n          </button>\n        </li>\n      </ul>\n    ) : '';\n\n    return Object.keys(currentState).length > 1 && userEmail ? (\n      <div className=\"App\">\n        <div className=\"column\" style={{ textAlign: 'center' }}>\n          <h5>Property investment deal analyser</h5>\n          <Form\n            name=\"propcalc\"\n            fields={fields}\n            formData={currentState}\n            twocols=\"yes\"\n            calculate={this.calculate}\n            currsymbol={currency}\n            onsave={this.saveState}\n            showsave={showSave}\n            error={error}\n          />\n          {newButton}\n        </div>\n        <div className=\"column results\">\n          {Results(this.state)}\n        </div>\n        <div className=\"column states\">\n          <div className=\"my-stuff\">\n            <h6>\n              My stuff (\n              {userEmail}\n              )\n            </h6>\n          </div>\n          <div className=\"logout\">\n            <Logout\n              doLogout={this.logout}\n            />\n          </div>\n          <div className=\"saved-list\">\n            {savedList}\n          </div>\n        </div>\n      </div>\n    )\n      : (\n        <Login\n          doLogin={this.login}\n        />\n      );\n  }\n}\n\nApp.propTypes = {\n  cookies: PropTypes.instanceOf(Cookies).isRequired,\n};\n\nexport default withCookies(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-env browser */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './Root';\nimport * as serviceWorker from './serviceWorker';\n\nimport './css/bootstrap-override.scss';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\nimport { CookiesProvider } from 'react-cookie';\nimport App from './components/App';\n\nexport default function Root() {\n  return (\n    <CookiesProvider>\n      <App />\n    </CookiesProvider>\n  );\n}\n"],"sourceRoot":""}