(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,a){e.exports=[{label:"Project name",name:"projectName",type:"text"},{label:"Price(\xa3)",name:"propertyValue",type:"number",defVal:0},{label:"Done up value(\xa3)",name:"doneUpValue",type:"number",defVal:0},{label:"Monthly rent(\xa3)",name:"monthlyRent",type:"number",defVal:0},{label:"Cash purchase",name:"buyingCash",type:"checkbox",defVal:"no"},{label:"Surveyors fee(\xa3)",name:"initSurveyorsFee",type:"number",defVal:0},{label:"Mortgage fee(\xa3)",name:"initMortgageFee",type:"number",defVal:0},{label:"Solicitors fee(\xa3)",name:"initLegalFee",type:"number",defVal:0},{label:"Stamp duty",name:"stampDutyType",type:"select",options:[{value:"residential",name:"Residential"},{value:"commercial",name:"Commercial"}],defVal:"residential"},{label:"Refurbishment cost(\xa3)",name:"refurbCost",type:"number",defVal:0},{label:"Other cost(\xa3)",name:"otherCost",type:"number",defVal:0},{label:"Initial LTV(%)",name:"initialLoanToValue",type:"number",defVal:75},{label:"Remortgage fee(\xa3)",name:"remortgageFee",type:"number",defVal:0},{label:"Remortgage valuation fee(\xa3)",name:"remortgageValuationFee",type:"number",defVal:0},{label:"Remortgage solicitors fee(\xa3)",name:"remortgageLegalFee",type:"number",defVal:0},{label:"Letting agents rate(%)",name:"agentsPercent",type:"number",defVal:10},{label:"MOE rate(%)",name:"moePercent",type:"number",defVal:15},{label:"Full repairing lease",name:"repairingLease",type:"checkbox",defVal:"no"},{label:"Interest rate(%)",name:"mortgageInterestRatePercent",type:"number",defVal:6},{label:"Remortgage LTV(%)",name:"loanToValue",type:"number",defVal:75},{label:"Solicitors selling fee(\xa3)",name:"sellingLegalFee",type:"number",defVal:0},{label:"Agent/selling fee(\xa3)",name:"agentSellingFee",type:"number",defVal:0},{label:"Mortgage stress test(%)",name:"mortgageStressMultipePercent",type:"number",defVal:125},{label:"Stress interest rate(%)",name:"mortgageStressInterestRatePercent",type:"number",defVal:5},{name:"submit",type:"submit",className:"btn-primary form-control",value:"update"}]},function(e,a){e.exports={commercial:[{upto:15e4,rate:0},{upto:25e4,rate:2},{upto:"end",rate:5}],residential:[{upto:125e3,rate:0},{upto:25e4,rate:2},{upto:925e3,rate:5},{upto:15e5,rate:10},{upto:"end",rate:12}]}},function(e,a,t){e.exports=t(19)},,,,,,function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(7),o=t.n(r),s=(t(16),t(1)),u=t(2),i=t(4),c=t(3),m=t(5),d=function(e){var a=e.name,t=e.doLabelClass,l=e.dynamicLabel,r=e.label,o=e.type;return n.a.createElement("div",{className:"checkbox"===o?"checkbox-label":"input-label"},n.a.createElement("label",{htmlFor:a,className:t(a)},l(a,r)))},b={Input:function(e){var a=e.className,t=e.name,l=e.type,r=e.onInput,o=e.placeholder,s=e.label,u=e.defVal,i=e.onblur,c=e.doLabelClass,m=e.dynamicLabel;return n.a.createElement("li",{key:t},n.a.createElement("input",{className:a||"form-control",key:t,type:l,name:t,id:t,onChange:function(e){return r(e)},autoComplete:"off",placeholder:o||s||"".concat(t," [").concat(l,"]"),defaultValue:u||"",onBlur:function(e){return i(e)}}),"submit"!==l?d({name:t,doLabelClass:c,dynamicLabel:m,label:s,type:l}):"")},Select:function(e){var a=e.className,t=e.name,l=e.type,r=e.onInput,o=e.placeholder,s=e.label,u=(e.defVal,e.onblur),i=e.options,c=e.doLabelClass,m=e.dynamicLabel;return n.a.createElement("li",{key:t},n.a.createElement("select",{className:a||"form-control",key:t,name:t,id:t,onChange:function(e){return r(e)},onBlur:function(e){return u(e)}},n.a.createElement("option",{value:"",disabled:!0},o||s||t),i.map(function(e){return n.a.createElement("option",{key:e.value,name:e.name,value:e.value},e.name)})),d({name:t,doLabelClass:c,dynamicLabel:m,label:s,type:l}))}},p=b.Input,f=b.Select,y=function(e){var a=e.render,t=e.fields,l=e.className;return n.a.createElement("ul",{className:l},a(t))},g=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(c.a)(a).call(this,e))).renderFields=function(e){var a=[];return e.forEach(function(e){e.dynamicLabel=function(e,a){return t.doLabel(e,a)},e.doLabelClass=function(e){return t.doLabelClass(e)},e.onInput=function(e){return t.handleChange(e.target,e)},e.onblur=function(e){return t.handleSubmit(e)},"select"===e.type?a.push(f(e)):a.push(p(e))}),a},t.renderFieldCols=function(){var e=Math.floor(t.props.fields.length/2),a=t.props.fields.slice(0),l=a.splice(e);return[n.a.createElement(y,{key:"1",fields:a,className:"left",render:t.renderFields}),n.a.createElement(y,{key:"2",className:l,fields:l,render:t.renderFields})]},t.handleChange=function(e){var a,l,n={};switch(e.type){case"number":a=isNaN(e.value)?0:parseFloat(e.value)||0;break;case"checkbox":a=e.checked?"yes":"no";break;default:a=e.value||""}/^submit/.test(e.type)||(n[e.name]=a,l=Object.assign(t.state.formData,n),t.setState({formData:l}),/^select-one$|^checkbox$/.test(e.type)&&t.props.onsubmit(t.state.formData))},t.state={fields:e.fields},t}return Object(m.a)(a,e),Object(u.a)(a,[{key:"defValues",value:function(){var e={};return this.props.fields.map(function(a){return/^submit/.test(a.type)||(e[a.name]=a.defVal),!1}),{formData:e}}},{key:"doLabel",value:function(e,a){var t=this.state.formData;return t&&t[e]?a||e:""}},{key:"doLabelClass",value:function(e){var a=this.state.formData;return a&&a[e]?"show":"hide"}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onsubmit(this.state.formData)}},{key:"componentDidMount",value:function(){this.setState(this.defValues())}},{key:"componentDidUpdate",value:function(e,a,t){console.log(e),console.log(a),console.log(this.state)}},{key:"render",value:function(){var e=this;return n.a.createElement("form",{name:this.props.name,id:this.props.name,onSubmit:function(a){return e.handleSubmit(a)}},"yes"===this.props.twocols?this.renderFieldCols():this.renderFields(this.props.fields))}}]),a}(l.Component),h=t(8),v=t.n(h),V=(t(17),function(e){return n.a.createElement("li",null,n.a.createElement("div",{className:"label"},e.label),n.a.createElement("div",{className:"value"},e.value))}),E=function(e){return n.a.createElement("ul",{key:e.id},e.data.map(function(a,t){return n.a.createElement(V,{key:"li-".concat(e.id,"-").concat(t),label:a.label,value:a.value})}))},F=t(9),k=t.n(F),L=function(e,a){var t,l,n,r=Math.round(e/100),o="commercial"===a?0:3,s=k.a[a],u=0;if(!a)return 0;for(var i=0;i<s.length;i++){if(t=s[i].upto,l=s[i].rate,n=i>0?s[i-1].upto:0,"end"===t)return u+=(r-n/100)*(l+o);if(e<=t)return u+=0===i?r*(l+o):(r-n/100)*(l+o);u+=(t-n)/100*(l+o)}return console.error("check stampduty-bands for property without upto: 'end' in last entry"),u},C=["Re-mortgage advance","Re-mortgage deposit","Re-mortgage fees","Money in","Money out","Money left in","Monthly rental","Monthly mortgage payment","MOE","Letting agent fees","Monthly free cashflow"],S=["Mortgage advance","Deposit","Stamp duty","Professional fees","Refurb/other costs","Total money in","Total cost"],M=["Sale price","Selling costs","Total input costs","Profit","Gain(%)"],N=["Stress test","Minimum rent"],R=function(e,a,t,l,n,r,o){return e+a+t+l+n+L(r,o)+r},T={freeCash:function(e){var a=e.loanToValue,t=(e.buyingCash,e.propertyValue),l=e.doneUpValue,n=e.mortgageInterestRatePercent,r=e.monthlyRent,o=e.moePercent,s=e.agentsPercent,u=e.refurbCost,i=e.otherCost,c=e.stampDutyType,m=e.remortgageFee,d=e.remortgageValuationFee,b=e.remortgageLegalFee,p=e.initMortgageFee,f=e.initLegalFee,y=e.initSurveyorsFee,g=e.repairingLease,h=a/100,v=Math.round(l*h),V=Math.round(l*(1-h)),E=Math.round(v*n/1200),F=r*o/100,k=r*s/100,S=r-F-E-k,M=u+i,N=m+d+b,R=p+f+y+M+L(t,c)+t,T="yes"===g?R-M:R,w=S>=100?"green":"red",D=C;return[{label:D[0],value:v},{label:D[1],value:V},{label:D[2],value:N},{label:D[3],value:T},{label:D[4],value:v-N},{label:D[5],value:T-(v-N)},{label:D[6],value:r},{label:D[7],value:E},{label:D[8],value:F},{label:D[9],value:k},{label:D[10],value:S,colour:w}]},initialFinance:function(e){var a=e.buyingCash,t=e.loanToValue,l=e.propertyValue,n=e.initSurveyorsFee,r=e.initLegalFee,o=e.initMortgageFee,s=e.refurbCost,u=e.otherCost,i=e.stampDutyType,c="yes"===a,m=t/100,d=c?0:Math.round(l*m),b=n+r+o,p=s+u,f=c?l:Math.round(l*(1-m)),y=L(l,i),g=R(n,r,o,s,u,l,i),h=g-d,v=S;return[{label:v[0],value:d},{label:v[1],value:f},{label:v[2],value:y},{label:v[3],value:b},{label:v[4],value:p},{label:v[5],value:h},{label:v[6],value:g}]},flip:function(e){var a=e.sellingLegalFee,t=e.agentSellingFee,l=e.initSurveyorsFee,n=e.initLegalFee,r=e.initMortgageFee,o=e.refurbCost,s=e.otherCost,u=e.propertyValue,i=e.stampDutyType,c=e.doneUpValue,m=R(l,n,r,o,s,u,i),d=a+t,b=Math.round((c-m)/m*1e4)/100,p=b>=20?"green":"red",f=M;return[{label:f[0],value:c},{label:f[1],value:d},{label:f[2],value:m||0},{label:f[3],value:c-(m+d)||0,col:p},{label:f[4],value:b||0,col:p}]},allInputCosts:R,stressTest:function(e){var a=e.doneUpValue,t=e.monthlyRent,l=e.loanToValue,n=e.mortgageStressInterestRatePercent,r=e.mortgageStressMultipePercent,o=Math.ceil(a*l/100*n/1200*r/100),s=t>=o,u=N;return[{label:u[0],value:s?"pass":"fail"},{label:u[1],value:o}]}},w=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(c.a)(a).call(this,e))).handleSubmit=function(e){console.log(e);var a=T.initialFinance(e),l=T.freeCash(e),n=T.flip(e),r=T.stressTest(e);t.setState({data:{dealFinance:a,buyToLet:l,stress:r,flip:n}})},t.doResults=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"res-block"},n.a.createElement("h4",null,"Deal finance"),n.a.createElement(E,{id:"1",data:t.state.data.dealFinance})),n.a.createElement("div",{className:"res-block"},n.a.createElement("h4",null,"Buy to let"),n.a.createElement(E,{id:"2",data:t.state.data.buyToLet})),n.a.createElement("div",{className:"res-block"},n.a.createElement("h4",null,"Stress test"),n.a.createElement(E,{id:"3",data:t.state.data.stress})),n.a.createElement("div",{className:"res-block"},n.a.createElement("h4",null,"Flip"),n.a.createElement(E,{id:"4",data:t.state.data.flip})))},t.state={data:{dealFinance:[],buyToLet:[],stress:[],flip:[]}},t}return Object(m.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"column"},n.a.createElement(g,{name:"propcalc",fields:v.a,twocols:"yes",onsubmit:this.handleSubmit})),n.a.createElement("div",{className:"column results"},this.doResults()))}}]),a}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(18);o.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.ae6a12a6.chunk.js.map