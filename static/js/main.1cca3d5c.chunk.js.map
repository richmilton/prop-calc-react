{"version":3,"sources":["components/common/appConstants.js","components/common/confirmDialog.js","components/common/StatelessFormComponents.jsx","components/form/FormComponent.jsx","components/form/formconfig.js","util/showDate.js","components/saved/SavedStateComponents.jsx","components/results/list/ResultsListComponent.jsx","util/validate-postcode.js","components/results/links/ResultsLinksComponent.jsx","components/results/ResultsComponent.jsx","logic/calculations/allInputCosts.js","labels/calculations-labels.js","logic/calculations/freeCash.js","logic/calculations/index.jsx","logic/calculations/initialFinance.js","logic/calculations/flip.js","logic/calculations/stressTest.js","components/login/formconfig.js","components/login/LoginComponent.jsx","components/login/LogoutComponent.jsx","components/toastMessages.js","util/shallowObjectEquals.js","components/App.jsx","Root.jsx","serviceWorker.js","index.js"],"names":["percentSign","String","fromCharCode","module","exports","formTypes","NUMBER","TEXT","CHECKBOX","SELECT","EMAIL","currencyPlaceholder","toastPlaceHolder","confirmDialog","message","fn","label","fn2","buttons","onClick","confirmAlert","currRegEx","RegExp","addCurrencySymbolToLabel","currencyCode","currSymbol","replace","Label","_ref","name","doLabelClass","dynamicLabel","type","currency","labelWithCurrency","react_default","a","createElement","className","htmlFor","StatelessComponents","Input","_ref2","onInput","placeholder","defVal","required","disabled","tooltip","key","id","onChange","e","autoComplete","concat","value","checked","title","Select","_ref3","options","map","opt","FormColumn","render","fields","Form","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","doLabel","bind","assertThisInitialized","renderFields","renderFieldCols","handleChange","handleSave","calculate","fname","formData","val","Number","isNaN","parseFloat","preventDefault","onsave","target","blur","_this2","formFields","_this$props","currsymbol","disable","regex","whenField","test","forEach","field","ob","objectSpread","n","l","onblur","some","push","arrLength","Math","floor","length","left","slice","right","splice","_this$props2","twocols","button","showsave","Component","showDate","milliseconds","split","dateFormat","Date","parseInt","handleClick","callback","SavedStateListItem","ondelete","onclick","deletable","firstname","deleteButton","style","display","width","SavedStateList","data","onselect","useremail","filter","filteredData","ind","projectName","email","SavedStateComponents_SavedStateListItem","ListItem","ResultsList","ResultsListComponent_ListItem","postCodeRegEx","validatePostcode","postCode","toUpperCase","urls","rmBuy","commercial","process","residential","rmRent","nhpSold","zooSold","otmSold","gMap","Link","href","text","rel","Links","askingPrice","monthlyRent","propertyValue","urlType","stampDutyType","startsWith","oneK","oneHundredK","maxPrice","ceil","maxRent","Fragment","color","fontStyle","Results","currentState","_ref$currentState","dealType","dealFinance","buyToLet","stress","flip","showBTL","showFlip","ResultsListComponent","allInputCosts","initSurveyorsFee","initLegalFee","initMortgageFee","refurbCost","otherCost","stampDutyRegion","stampDutyBuyer","stampDutyCalculator","tax","calculations_labels","calculations","freeCash","loanToValue","doneUpValue","mortgageInterestRatePercent","moePercent","agentsPercent","remortgageFee","remortgageValuationFee","remortgageLegalFee","repairingLease","isRepairing","loanToVal","remortgageAdvance","round","remortgageDeposit","remortgageMonthlyInterest","moe","lettingAgentsFees","freeCashFlowMonthly","remortgageFees","initialCost","grossYield","labels","calculationsLabels","toFixed","initialFinance","interest","term","buyingCash","initialLoanToValue","mortgageTerm","isCash","initMortgageAdvance","mortgageMonthlyInterest","monthlyRepayment","pow","initFees","other","initialDeposit","sdltTotal","totCost","totIn","sellingLegalFee","agentSellingFee","fees","flipGain","col","stressTest","mortgageStressInterestRatePercent","mortgageStressMultipePercent","minRent","pass","getCurrencyCode","Login","state","handleSubmit","setState","doLogin","textAlign","onSubmit","onBlur","Logout","doLogout","toastMessages","unrecognisedUser","appearance","autoDismissTimeout","dataRetrieved","noneSaved","dataRetrievalError","savedSuccess","saveError","deleteSuccess","deleteError","login","logout","loaded","shallowObjectEquals","json1","arguments","undefined","json2","keys","every","k","require","App","savedStates","Items","hasWorkingAPI","userEmail","cookies","get","showInput","showResults","showSaved","topRef","React","createRef","saveState","deleteState","selectState","toastIt","checkSaveOrAbortChanges","tabLink","selectTab","defaults","getSavedStates","setDefault","asyncToGenerator","regenerator_default","mark","_callee","sortByNameThenDate","setDefaultState","resp","wrap","_context","prev","next","pNameA","idA","pNameB","idB","fetch","sent","status","json","sort","t0","loadState","finish","stop","apply","retrieveStates","then","_ref4","toastManager","add","stateId","find","newState","setDefaultFormData","changedField","newValue","inputData","defineProperty","document","getElementById","_this3","_ref5","_callee2","_this3$state","_this3$state$currentS","stateToSave","_context2","abrupt","method","headers","Accept","Content-Type","body","JSON","stringify","persistState","_this4","findState","_ref6","_callee3","deleteStateId","_context3","_x","removeState","delete","_this5","selectedState","window","scrollTo","top","behavior","_this6","_this$state","_this$state$currentSt","changed","_this7","_this8","set","path","event","selectedTab","_this9","_event$target","_this10","_this$state2","error","showSave","emailDomain","savedList","SavedStateComponents","o","float","newButton","handleNew","ref","App_Input","FormComponent","LogoutComponent","LoginComponent","withCookies","ToastyApp","withToastManager","Boolean","location","hostname","match","ReactDOM","es6","dist","autoDismiss","placement","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1cca3d5c.chunk.js","sourcesContent":["const formTypes = {\n  NUMBER: 'number',\n  TEXT: 'text',\n  CHECKBOX: 'checkbox',\n  SELECT: 'select',\n  EMAIL: 'email',\n};\n\nconst currencyPlaceholder = '##CURR##';\nconst toastPlaceHolder = '##LABEL##';\nconst percentSign = String.fromCharCode(37);\n\nmodule.exports = {\n  formTypes,\n  currencyPlaceholder,\n  percentSign,\n  toastPlaceHolder,\n};\n","import { confirmAlert } from 'react-confirm-alert';\n\nconst confirmDialog = (message, fn, label, fn2) => {\n  const buttons = [\n    {\n      label: 'Yes',\n      onClick: fn,\n    },\n    {\n      label: 'No',\n      onClick: () => false,\n    },\n  ];\n  if (label) buttons[2] = { label, onClick: fn2 };\n  confirmAlert({\n    message,\n    buttons,\n  });\n};\n\nexport default confirmDialog;\n","import React from 'react';\nimport { currencyPlaceholder } from './appConstants';\n\nconst PropTypes = require('prop-types');\n\nconst basePropTypes = {\n  name: PropTypes.string.isRequired,\n  doLabelClass: PropTypes.func,\n  dynamicLabel: PropTypes.func,\n  label: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  currency: PropTypes.number,\n};\nconst formControlPropTypes = {\n  className: PropTypes.string,\n  onInput: PropTypes.func.isRequired,\n  defVal: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  options: PropTypes.arrayOf(PropTypes.object),\n  disabled: PropTypes.bool,\n};\nconst currRegEx = new RegExp(currencyPlaceholder, 'g');\n\nconst addCurrencySymbolToLabel = (label, currencyCode) => {\n  const currSymbol = String.fromCharCode(currencyCode);\n  return label.replace(currRegEx, currSymbol);\n};\n\n// stateless component Label\nfunction Label({\n  name, doLabelClass, dynamicLabel, label, type, currency,\n}) {\n  const labelWithCurrency = addCurrencySymbolToLabel(label, currency);\n\n  return (\n    <div className={type === 'checkbox' ? 'checkbox-label' : 'input-label'}>\n      <label\n        htmlFor={name}\n        className={doLabelClass ? doLabelClass(name) : name}\n      >\n        {dynamicLabel ? dynamicLabel(name, labelWithCurrency) : label}\n      </label>\n    </div>\n  );\n}\n\nLabel.propTypes = {\n  ...basePropTypes,\n};\n\nfunction Input({\n  className, name, type, onInput,\n  placeholder, label, defVal,\n  doLabelClass, dynamicLabel,\n  currency, required, disabled, tooltip,\n}) {\n  const labelWithCurrency = addCurrencySymbolToLabel(label, currency);\n\n  return (\n    <li key={name}>\n      <input\n        className={className || 'form-control'}\n        key={name}\n        type={type}\n        name={name}\n        id={name}\n        onChange={e => onInput(e)}\n        autoComplete=\"off\"\n        placeholder={placeholder || labelWithCurrency || `${name} [${type}]`}\n        value={defVal || ''}\n        checked={defVal === 'yes'}\n        required={required || false}\n        disabled={disabled}\n        title={tooltip || labelWithCurrency}\n      />\n      {Label({\n        name, doLabelClass, dynamicLabel, label, type, currency,\n      })}\n    </li>\n  );\n}\n\nInput.propTypes = {\n  ...basePropTypes,\n  ...formControlPropTypes,\n  placeholder: PropTypes.string.isRequired,\n  required: PropTypes.bool.isRequired,\n};\n\n// stateless component Select\nfunction Select({\n  className, name, type, onInput, label, defVal,\n  options, doLabelClass, dynamicLabel, disabled, tooltip,\n}) {\n  return (\n    <li key={name}>\n      <select\n        value={defVal}\n        className={className || 'form-control'}\n        key={name}\n        name={name}\n        id={name}\n        onChange={e => onInput(e)}\n        disabled={disabled}\n        title={tooltip || ''}\n      >\n        {options.map(\n          opt => (\n            <option\n              key={opt.value}\n              name={opt.name}\n              value={opt.value}\n            >\n              {opt.name}\n            </option>\n          ),\n        )}\n      </select>\n      {Label({\n        name, doLabelClass, dynamicLabel, label, type,\n      })}\n    </li>\n  );\n}\n\nSelect.propTypes = {\n  ...basePropTypes,\n  ...formControlPropTypes,\n};\n\nconst StatelessComponents = {\n  Input,\n  Select,\n};\n\nexport default StatelessComponents;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport StatelessComponents from '../common/StatelessFormComponents';\nimport { formTypes } from '../common/appConstants';\n\nconst PropTypes = require('prop-types');\n\nconst { Input, Select } = StatelessComponents;\n\nfunction FormColumn({ render, fields, className }) {\n  return (\n    <ul className={className}>\n      {render(fields)}\n    </ul>\n  );\n}\n\nFormColumn.propTypes = {\n  render: PropTypes.func.isRequired,\n  fields: PropTypes.arrayOf(PropTypes.object).isRequired,\n  className: PropTypes.string.isRequired,\n};\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    this.doLabel = this.doLabel.bind(this);\n    this.doLabelClass = this.doLabelClass.bind(this);\n    this.renderFields = this.renderFields.bind(this);\n    this.renderFieldCols = this.renderFieldCols.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  componentDidMount() {\n    const { calculate } = this.props;\n    calculate();\n  }\n\n  doLabel(fname, label) {\n    const { formData } = this.props;\n    return formData && formData[fname] ? label || fname : '';\n  }\n\n  doLabelClass(fname) {\n    const { formData } = this.props;\n    return formData && formData[fname] ? 'show' : 'hide';\n  }\n\n  handleChange({\n    type,\n    value,\n    checked,\n    name,\n  }) {\n    const { props } = this;\n    let val;\n\n    switch (type) {\n      case formTypes.NUMBER:\n        val = Number.isNaN(value) ? 0 : (Number.parseFloat(value) || 0);\n        break;\n      case formTypes.CHECKBOX:\n        val = checked ? 'yes' : 'no';\n        break;\n      default:\n        val = value || '';\n    }\n\n    props.calculate(name, val);\n  }\n\n  handleSave(e) {\n    e.preventDefault();\n    const { onsave } = this.props;\n    onsave();\n    e.target.blur();\n  }\n\n  renderFields(fields) {\n    const formFields = [];\n    const { currsymbol, formData } = this.props;\n    const disable = ({ regex, whenField }) => regex.test(formData[whenField]);\n\n    fields.forEach((field) => {\n      const ob = { ...field };\n      ob.dynamicLabel = (n, l) => this.doLabel(n, l);\n      ob.doLabelClass = n => this.doLabelClass(n);\n      ob.onInput = e => this.handleChange(e.target);\n      ob.onblur = e => this.handleChange(e.target);\n      ob.currency = currsymbol;\n      ob.defVal = formData[ob.name];\n      ob.disabled = ob.disabled && ob.disabled.some(disable);\n      if (ob.type === 'select') {\n        formFields.push(Select(ob));\n      } else {\n        formFields.push(Input(ob));\n      }\n    });\n    return formFields;\n  }\n\n  renderFieldCols() {\n    const { fields } = this.props;\n    const arrLength = Math.floor(fields.length / 2);\n    const left = fields.slice(0);\n    const right = left.splice(arrLength);\n\n    return [\n      <FormColumn\n        key=\"1\"\n        fields={left}\n        className=\"left\"\n        render={this.renderFields}\n      />,\n      <FormColumn\n        key=\"2\"\n        fields={right}\n        className=\"right\"\n        render={this.renderFields}\n      />,\n    ];\n  }\n\n  render() {\n    const {\n      name,\n      twocols,\n      fields,\n      showsave,\n    } = this.props;\n    const button = showsave ? (\n      <ul className=\"left\">\n        <li>\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n            onClick={this.handleSave}\n          >\n            save this\n          </button>\n        </li>\n      </ul>\n    ) : '';\n\n    return (\n      <form\n        name={name}\n        id={name}\n      >\n        {twocols === 'yes' ? this.renderFieldCols() : this.renderFields(fields)}\n        {button}\n      </form>\n    );\n  }\n}\n\nForm.propTypes = {\n  name: PropTypes.string.isRequired,\n  fields: PropTypes.arrayOf(PropTypes.object).isRequired,\n  formData: PropTypes.shape({}).isRequired,\n  twocols: PropTypes.string.isRequired,\n  calculate: PropTypes.func.isRequired,\n  currsymbol: PropTypes.number.isRequired,\n  onsave: PropTypes.func.isRequired,\n  showsave: PropTypes.bool.isRequired,\n};\n\nexport default Form;\n","import { formTypes, currencyPlaceholder, percentSign } from '../common/appConstants';\n\nconst fields = [\n  {\n    label: 'Project name',\n    name: 'projectName',\n    type: formTypes.TEXT,\n    defVal: '',\n    required: true,\n    tooltip: 'used as reference when saving',\n  },\n  {\n    label: 'Post code',\n    name: 'postCode',\n    type: formTypes.TEXT,\n    defVal: '',\n    required: true,\n    tooltip: 'a valid UK postcode will show links panel in results section',\n  },\n  {\n    label: `Asking price(${currencyPlaceholder})`,\n    name: 'askingPrice',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    tooltip: 'for reference only: not used in calculations',\n  },\n  {\n    label: `Purchase price(${currencyPlaceholder})`,\n    name: 'propertyValue',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    tooltip: 'price you intend paying for property: will be used in deal finance and stamp duty calculation',\n  },\n  {\n    label: `Done up value/GDV(${currencyPlaceholder})`,\n    name: 'doneUpValue',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    tooltip: 'market value after completing works: used to calculate buy to let section',\n  },\n  {\n    label: `Initial LTV(${percentSign})`,\n    name: 'initialLoanToValue',\n    type: formTypes.NUMBER,\n    defVal: 75,\n    disabled: [{ whenField: 'buyingCash', regex: /yes/ }],\n    tooltip: 'used to calculate deal finance mortgage advance and deposit',\n  },\n  {\n    label: `Mortgage fee(${currencyPlaceholder})`,\n    name: 'initMortgageFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'buyingCash', regex: /yes/ }],\n    tooltip: 'included in deal finance professional fees',\n  },\n  {\n    label: `Surveyors fee(${currencyPlaceholder})`,\n    name: 'initSurveyorsFee',\n    type: formTypes.NUMBER,\n    defVal: 600,\n    tooltip: 'included in deal finance professional fees',\n  },\n  {\n    label: 'Cash purchase',\n    name: 'buyingCash',\n    type: formTypes.CHECKBOX,\n    defVal: 'no',\n  },\n  {\n    label: 'Mortgage term',\n    name: 'mortgageTerm',\n    type: formTypes.NUMBER,\n    defVal: 25,\n    disabled: [{ whenField: 'buyingCash', regex: /yes/ }],\n    tooltip: 'used in deal finance repayment mortgage calculation',\n  },\n  {\n    label: `Legal fees(${currencyPlaceholder})`,\n    name: 'initLegalFee',\n    type: formTypes.NUMBER,\n    defVal: 1500,\n    tooltip: 'included in deal finance professional fees',\n  },\n  {\n    label: 'Stamp duty type',\n    name: 'stampDutyType',\n    type: formTypes.SELECT,\n    options: [\n      { value: 'residential', name: 'Residential' },\n      { value: 'commercial', name: 'Commercial' },\n    ],\n    defVal: 'residential',\n    tooltip: 'what kind of property are you buying',\n  },\n  {\n    label: 'Stamp duty region',\n    name: 'stampDutyRegion',\n    type: formTypes.SELECT,\n    options: [\n      { value: 'england', name: 'England/NI' },\n      { value: 'scotland', name: 'Scotland' },\n      { value: 'wales', name: 'Wales' },\n      { value: 'ireland', name: 'Ireland' },\n    ],\n    defVal: 'england',\n    tooltip: 'where is it',\n  },\n  {\n    label: 'Stamp duty buyer',\n    name: 'stampDutyBuyer',\n    type: formTypes.SELECT,\n    options: [\n      { value: 'investor', name: 'Investor' },\n      { value: 'first', name: 'First time buyer' },\n      { value: 'home', name: 'Moving house' },\n    ],\n    defVal: 'investor',\n    disabled: [{ whenField: 'stampDutyType', regex: /commercial/ }],\n    tooltip: 'what kind of buyer are you',\n  },\n  {\n    label: `Monthly rent(${currencyPlaceholder})`,\n    name: 'monthlyRent',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'used for but to let calculation',\n  },\n  {\n    label: 'Deal type',\n    name: 'dealType',\n    type: formTypes.SELECT,\n    options: [\n      { value: 'btl&flip', name: 'Buy to let and flip' },\n      { value: 'btl', name: 'Buy to let' },\n      { value: 'flip', name: 'Flip' },\n      { value: 'home', name: 'Home only' },\n    ],\n    defVal: 'btl&flip',\n    tooltip: 'what kind of purchase are you interested in',\n  },\n  {\n    label: `Refurbishment cost(${currencyPlaceholder})`,\n    name: 'refurbCost',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    tooltip: 'used in deal finance and buy to let money in and yield calculations',\n  },\n  {\n    label: `Other cost(${currencyPlaceholder})`,\n    name: 'otherCost',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    tooltip: 'used in deal finance and buy to let money in and yield calculations',\n  },\n  {\n    label: `Remortgage fee(${currencyPlaceholder})`,\n    name: 'remortgageFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'included in buy to let remortgage fees',\n  },\n  {\n    label: `Remortgage valuation fee(${currencyPlaceholder})`,\n    name: 'remortgageValuationFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'included in buy to let remortgage fees',\n  },\n  {\n    label: `Remortgage legal fees(${currencyPlaceholder})`,\n    name: 'remortgageLegalFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'included in buy to let remortgage fees',\n  },\n  {\n    label: `Letting agents rate(${percentSign})`,\n    name: 'agentsPercent',\n    type: formTypes.NUMBER,\n    defVal: 10,\n    disabled: [\n      { whenField: 'dealType', regex: /^((?!btl).)*$/ },\n      { whenField: 'repairingLease', regex: /yes/ },\n    ],\n    tooltip: 'used in free cash flow calculation',\n  },\n  {\n    label: `\n    MOE rate(${percentSign})`,\n    name: 'moePercent',\n    type: formTypes.NUMBER,\n    defVal: 15,\n    disabled: [\n      { whenField: 'dealType', regex: /^((?!btl).)*$/ },\n      { whenField: 'repairingLease', regex: /yes/ },\n    ],\n    tooltip: 'used in free cash flow calculation',\n  },\n  {\n    label: 'Repairing lease',\n    name: 'repairingLease',\n    type: formTypes.CHECKBOX,\n    defVal: 'no',\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n  },\n  {\n    label: `Interest rate(${percentSign})`,\n    name: 'mortgageInterestRatePercent',\n    type: formTypes.NUMBER,\n    defVal: 6.0,\n    tooltip: 'used in both deal finance and buy to let remortgage calculations',\n  },\n  {\n    label: `Remortgage LTV(${percentSign})`,\n    name: 'loanToValue',\n    type: formTypes.NUMBER,\n    defVal: 75,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'used in buy to let remortgage calculations',\n  },\n  {\n    label: `Solicitors selling fee(${currencyPlaceholder})`,\n    name: 'sellingLegalFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!flip).)*$/ }],\n    tooltip: 'included in flip selling costs',\n  },\n  {\n    label: `Agent/selling fee(${currencyPlaceholder})`,\n    name: 'agentSellingFee',\n    type: formTypes.NUMBER,\n    defVal: 0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!flip).)*$/ }],\n    tooltip: 'included in flip selling costs',\n  },\n  {\n    label: `Mortgage stress test(${percentSign})`,\n    name: 'mortgageStressMultipePercent',\n    type: formTypes.NUMBER,\n    defVal: 125,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'used only for stress test calculations',\n  },\n  {\n    label: `Stress interest rate(${percentSign})`,\n    name: 'mortgageStressInterestRatePercent',\n    type: formTypes.NUMBER,\n    defVal: 5.0,\n    disabled: [{ whenField: 'dealType', regex: /^((?!btl).)*$/ }],\n    tooltip: 'used only for stress test calcualtions',\n  },\n];\n\nexport default fields;\n","import dateFormat from 'date-format';\n\nconst showDate = (id) => {\n  const milliseconds = id.split('#')[1] || id;\n  return dateFormat('dd/MM hh:mm:ss', new Date(parseInt(milliseconds, 0)));\n};\n\nexport default showDate;\n","/* eslint-env browser */\nimport React from 'react';\nimport showDate from '../../util/showDate';\n\nconst PropTypes = require('prop-types');\n\nconst handleClick = (e, callback) => {\n  e.preventDefault();\n  e.target.blur();\n  callback(e.target.id.split('-')[1]);\n};\n\n// const showDate = milis => dateFormat('dd/MM hh:mm:ss', new Date(parseInt(milis, 0)));\n\nconst SavedStateListItem = ({\n  label,\n  value,\n  ondelete,\n  onclick,\n  deletable,\n  firstname,\n}) => {\n  const deleteButton = (\n    <div className=\"remove-state\">\n      <button\n        className=\"btn-sm btn-primary btn-warning\"\n        type=\"submit\"\n        id={`delete-${value}`}\n        onClick={e => handleClick(e, ondelete)}\n        style={{ display: deletable ? '' : 'none' }}\n      >\n        delete\n      </button>\n    </div>\n  );\n  return (\n    <li>\n      <div className={`state ${deletable ? 'deletable' : ''}`}>\n        <button\n          className=\"btn-primary form-control\"\n          style={{ width: '100%' }}\n          type=\"submit\"\n          id={`select-${value}`}\n          onClick={e => handleClick(e, onclick)}\n        >\n          {`${label} (${showDate(value)}${deletable ? '' : ` ${firstname}`})`}\n        </button>\n      </div>\n      {deletable ? deleteButton : ''}\n    </li>\n  );\n};\n\nSavedStateListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  ondelete: PropTypes.func.isRequired,\n  onclick: PropTypes.func.isRequired,\n  deletable: PropTypes.bool.isRequired,\n  firstname: PropTypes.string.isRequired,\n};\n\nconst SavedStateList = ({\n  data,\n  ondelete,\n  onselect,\n  onclick,\n  useremail,\n  filter,\n}) => {\n  if (data.map) {\n    const filteredData = data.filter(filter);\n    return (\n      <ul>\n        {filteredData.map(({ projectName, id, email }, ind) => {\n          const key = `li-${id}-${ind}`;\n          return (\n            <SavedStateListItem\n              ondelete={ondelete}\n              key={`li-${key}`}\n              label={projectName || 'untitled'}\n              value={id}\n              onselect={onselect}\n              onclick={onclick}\n              deletable={useremail === email}\n              firstname={email.split('@')[0].split('.')[0]}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n  return '';\n};\n\nSavedStateList.propTypes = {\n  data: PropTypes.arrayOf(PropTypes.object),\n  ondelete: PropTypes.func.isRequired,\n  onselect: PropTypes.func,\n  onclick: PropTypes.func.isRequired,\n  useremail: PropTypes.string.isRequired,\n  filter: PropTypes.func,\n};\n\nexport default SavedStateList;\n","/* eslint react/prop-formTypes: 0 */\n// eslint-disable-next-line\nimport React from 'react';\n\nconst PropTypes = require('prop-types');\n\nconst ListItem = ({ label, value }) => (\n  <li>\n    <div className=\"label\">{label}</div>\n    <div className=\"value\">{value}</div>\n  </li>\n);\n\nListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n};\n\nconst ResultsList = ({ data, id }) => (data ? (\n  <ul>\n    {data.map(({ label, value }, ind) => {\n      const key = `li-${id}-${ind}`;\n      return <ListItem key={`li-${key}`} label={label} value={value} />;\n    })}\n  </ul>\n) : '');\n\nResultsList.propTypes = {\n  id: PropTypes.string.isRequired,\n  data: PropTypes.instanceOf(Array).isRequired,\n};\n\nexport default ResultsList;\n","// postcode validation regex\nconst postCodeRegEx = /^(GIR[ ]?0AA|((AB|AL|B|BA|BB|BD|BH|BL|BN|BR|BS|BT|CA|CB|CF|CH|CM|CO|CR|CT|CV|CW|DA|DD|DE|DG|DH|DL|DN|DT|DY|E|EC|EH|EN|EX|FK|FY|G|GL|GY|GU|HA|HD|HG|HP|HR|HS|HU|HX|IG|IM|IP|IV|JE|KA|KT|KW|KY|L|LA|LD|LE|LL|LN|LS|LU|M|ME|MK|ML|N|NE|NG|NN|NP|NR|NW|OL|OX|PA|PE|PH|PL|PO|PR|RG|RH|RM|S|SA|SE|SG|SK|SL|SM|SN|SO|SP|SR|SS|ST|SW|SY|TA|TD|TF|TN|TQ|TR|TS|TW|UB|W|WA|WC|WD|WF|WN|WR|WS|WV|YO|ZE)(\\d[\\dA-Z]?[ ]?\\d[ABD-HJLN-UW-Z]{2}))|BFPO[ ]?\\d{1,4})$/;\n\nconst validatePostcode = postCode => postCodeRegEx.test(postCode.toUpperCase());\n\nexport default validatePostcode;\n","import React from 'react';\nimport validatePostcode from '../../../util/validate-postcode';\n\nconst PropTypes = require('prop-types');\n\nconst urls = {\n  rmBuy: {\n    commercial: process.env.REACT_APP_RM_COM_BUY_URL,\n    residential: process.env.REACT_APP_RM_BUY_URL,\n  },\n  rmRent: {\n    commercial: process.env.REACT_APP_RM_COM_LET_URL,\n    residential: process.env.REACT_APP_RM_LET_URL,\n  },\n  nhpSold: process.env.REACT_APP_NHP_SOLD_URL,\n  zooSold: process.env.REACT_APP_ZOO_SOLD_URL,\n  otmSold: process.env.REACT_APP_OTM_SOLD_URL,\n  gMap: process.env.REACT_APP_MAP_URL,\n};\n\nfunction Link({ href, text }) {\n  return (\n    <a\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      href={href}\n    >\n      {text}\n    </a>\n  );\n}\n\nLink.propTypes = {\n  href: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n};\n\nfunction Links(\n  {\n    postCode,\n    askingPrice,\n    monthlyRent,\n    propertyValue,\n    stampDutyType,\n  },\n) {\n  const urlType = stampDutyType.startsWith('commercial') ? 'commercial' : 'residential';\n  const { oneK, oneHundredK } = { oneK: 1000, oneHundredK: 100000 };\n  const maxPrice = Math\n    .ceil((askingPrice || propertyValue || 400000) / oneHundredK * 1.2) * oneHundredK;\n  const maxRent = Math.ceil((monthlyRent || oneK) / oneK * 1.2) * oneK;\n\n  return (postCode && validatePostcode(postCode)) ? (\n    <React.Fragment>\n      sold prices:\n      {' '}\n      <Link\n        href={urls.nhpSold + postCode}\n        text=\"NHP\"\n      />\n      {':'}\n      <Link\n        href={urls.zooSold + postCode}\n        text=\"Zoopla\"\n      />\n      {':'}\n      <Link\n        href={urls.otmSold + postCode}\n        text=\"OTM\"\n      />\n      {' | '}\n      <Link\n        href={`${urls.rmBuy[urlType] + postCode}&maxPrice=${(maxPrice)}`}\n        text=\"for sale\"\n      />\n      {' | '}\n      <Link\n        href={`${urls.rmRent[urlType] + postCode}&maxPrice=${maxRent}`}\n        text=\"to let\"\n      />\n      {' | '}\n      <Link\n        href={urls.gMap + postCode}\n        text=\"gmap\"\n      />\n    </React.Fragment>\n  ) : <span style={{ color: 'red', fontStyle: 'italic' }}>use a full valid post code to see links here</span>;\n}\n\nLinks.propTypes = {\n  postCode: PropTypes.string.isRequired,\n  askingPrice: PropTypes.string.isRequired,\n  monthlyRent: PropTypes.number.isRequired,\n  propertyValue: PropTypes.number.isRequired,\n  stampDutyType: PropTypes.string.isRequired,\n};\n\nexport default Links;\n","import React from 'react';\nimport ResultsList from './list/ResultsListComponent';\nimport Links from './links/ResultsLinksComponent';\nimport validatePostcode from '../../util/validate-postcode';\n\nconst PropTypes = require('prop-types');\n\nfunction Results(\n  {\n    data, currentState, currency, currentState: { postCode, dealType },\n  },\n) {\n  const {\n    dealFinance,\n    buyToLet,\n    stress,\n    flip,\n  } = data;\n  const showBTL = /btl/.test(dealType);\n  const showFlip = /flip/.test(dealType);\n  const currSymbol = String.fromCharCode(currency);\n\n  return (\n    <React.Fragment>\n      <div className=\"res-block\" style={{ display: validatePostcode(postCode) ? '' : 'none' }}>\n        <h6>Links for this post code</h6>\n        {Links(currentState)}\n      </div>\n      <div className=\"res-block\">\n        <h6>{`Deal finance (${currSymbol})`}</h6>\n        <ResultsList id=\"1\" data={dealFinance} />\n      </div>\n      <div className=\"res-block\" style={{ display: showBTL ? '' : 'none' }}>\n        <h6>{`Buy to let (${currSymbol})`}</h6>\n        <ResultsList id=\"2\" data={buyToLet || ''} />\n      </div>\n      <div className=\"res-block\" style={{ display: showBTL ? '' : 'none' }}>\n        <h6>{`Stress test (${currSymbol})`}</h6>\n        <ResultsList id=\"3\" data={stress || ''} />\n      </div>\n      <div className=\"res-block\" style={{ display: showFlip ? '' : 'none' }}>\n        <h6>{`Flip (${currSymbol})`}</h6>\n        <ResultsList id=\"4\" data={flip} />\n      </div>\n    </React.Fragment>\n  );\n}\n\nResults.propTypes = {\n  data: PropTypes.shape({\n    dealFinance: PropTypes.arrayOf(PropTypes.object).isRequired,\n    buyToLet: PropTypes.arrayOf(PropTypes.object),\n    stress: PropTypes.arrayOf(PropTypes.object),\n    flip: PropTypes.arrayOf(PropTypes.object),\n  }).isRequired,\n  currency: PropTypes.number.isRequired,\n  currentState: PropTypes.shape({\n    postCode: PropTypes.string,\n    dealType: PropTypes.string,\n  }).isRequired,\n};\n\nexport default Results;\n","import stampDutyCalculator from 'uk-ireland-stampduty-calculator';\n\nconst allInputCosts = (\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  propertyValue,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n) => {\n  const { tax: stampDuty } = stampDutyCalculator.calculate(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n\n  return (\n    initSurveyorsFee\n    + initLegalFee\n    + initMortgageFee\n    + refurbCost\n    + otherCost\n    + stampDuty\n    + propertyValue\n  );\n};\n\nexport default allInputCosts;\n","const freeCashLabels = [\n  'Remortgage advance',\n  'Remortgage deposit',\n  'Remortgage fees',\n  'Money in',\n  'Money out',\n  'Money left in',\n  'Monthly rental',\n  'Monthly mortgage payment',\n  'MOE',\n  'Letting agent fees',\n  'Monthly free cashflow',\n  'Gross yield',\n];\n\nconst initialFinanceLabels = [\n  'Mortgage advance',\n  'Deposit',\n  'Stamp duty',\n  'Professional fees',\n  'Refurb/other costs',\n  'Total money in',\n  'Total cost',\n  'Interest only mortgage',\n  'Repayment mortgage',\n  'Repayment term',\n];\n\nconst flipLabels = [\n  'Sale price',\n  'Selling costs',\n  'Total input costs',\n  'Profit (before tax)',\n  'Gain(%)',\n];\n\nconst stressLabels = [\n  'Stress test',\n  'Minimum rent'];\n\nexport default {\n  freeCashLabels,\n  initialFinanceLabels,\n  flipLabels,\n  stressLabels,\n};\n","import stampDutyCalculator from 'uk-ireland-stampduty-calculator';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst percentSign = String.fromCharCode(37);\nconst freeCash = ({\n  loanToValue,\n  propertyValue,\n  doneUpValue,\n  mortgageInterestRatePercent,\n  monthlyRent,\n  moePercent,\n  agentsPercent,\n  refurbCost,\n  otherCost,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  remortgageFee,\n  remortgageValuationFee,\n  remortgageLegalFee,\n  initMortgageFee,\n  initLegalFee,\n  initSurveyorsFee,\n  repairingLease,\n}) => {\n  const isRepairing = repairingLease === 'yes';\n  const loanToVal = loanToValue / 100;\n  const remortgageAdvance = Math.round(doneUpValue * loanToVal);\n  const remortgageDeposit = Math.round(doneUpValue * (1 - loanToVal));\n  const remortgageMonthlyInterest = Math\n    .round(remortgageAdvance * mortgageInterestRatePercent / 1200);\n  const moe = isRepairing ? 0 : (monthlyRent * moePercent / 100);\n  const lettingAgentsFees = isRepairing ? 0 : (monthlyRent * agentsPercent / 100);\n  const freeCashFlowMonthly = monthlyRent - (repairingLease === 'yes' ? 0 : moe) - remortgageMonthlyInterest - lettingAgentsFees;\n  const totalOtherCosts = refurbCost + otherCost;\n  const { tax: sdltTotal } = stampDutyCalculator.calculate(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n  const remortgageFees = remortgageFee + remortgageValuationFee + remortgageLegalFee;\n  const initialFees = initMortgageFee + initLegalFee + initSurveyorsFee;\n  const initialCost = initialFees + totalOtherCosts + sdltTotal + propertyValue;\n  const grossYield = (monthlyRent * 1200) / initialCost;\n  const labels = calculationsLabels.freeCashLabels;\n\n  return [\n    { label: labels[0], value: remortgageAdvance.toFixed(2) },\n    { label: labels[1], value: remortgageDeposit.toFixed(2) },\n    { label: labels[2], value: remortgageFees.toFixed(2) },\n    { label: labels[3], value: initialCost.toFixed(2) },\n    { label: labels[4], value: (remortgageAdvance - remortgageFees).toFixed(2) },\n    { label: labels[5], value: (initialCost - (remortgageAdvance - remortgageFees)).toFixed(2) },\n    { label: labels[6], value: monthlyRent.toFixed(2) },\n    { label: labels[7], value: remortgageMonthlyInterest.toFixed(2) },\n    { label: labels[8], value: moe.toFixed(2) },\n    { label: labels[9], value: lettingAgentsFees.toFixed(2) },\n    { label: labels[10], value: freeCashFlowMonthly.toFixed(2) },\n    { label: labels[11], value: grossYield.toFixed(2) + percentSign },\n  ];\n};\n\nexport default freeCash;\n","import allInputCosts from './allInputCosts';\nimport freeCash from './freeCash';\nimport initialFinance from './initialFinance';\nimport flip from './flip';\nimport stressTest from './stressTest';\n\nconst getCurrencyCode = ({ stampDutyRegion }) => (stampDutyRegion === 'ireland' ? 8364 : 163);\n\nconst calculations = {\n  freeCash,\n  initialFinance,\n  flip,\n  allInputCosts,\n  stressTest,\n  getCurrencyCode,\n};\n\nexport default calculations;\n","import stampDutyCalculator from 'uk-ireland-stampduty-calculator';\nimport allInputCosts from './allInputCosts';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst repaymentCalc = (principal, interest, term) => (\n  (interest / 100 / 12) * principal) / (1 - ((1 + (interest / 100 / 12)) ** (-term * 12))\n);\nconst initialFinance = ({\n  buyingCash,\n  initialLoanToValue,\n  mortgageInterestRatePercent,\n  propertyValue,\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  mortgageTerm,\n}) => {\n  const isCash = buyingCash === 'yes';\n  const loanToVal = initialLoanToValue / 100;\n  const initMortgageAdvance = isCash ? 0 : Math.round(propertyValue * loanToVal);\n  const mortgageMonthlyInterest = Math\n    .round(initMortgageAdvance * mortgageInterestRatePercent / 1200);\n  const monthlyRepayment = repaymentCalc(\n    initMortgageAdvance, mortgageInterestRatePercent, mortgageTerm,\n  );\n  const initFees = initSurveyorsFee + initLegalFee + initMortgageFee;\n  const other = refurbCost + otherCost;\n  const initialDeposit = isCash ? propertyValue : Math.round(propertyValue * (1 - loanToVal));\n  const { tax: sdltTotal } = stampDutyCalculator.calculate(\n    propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer,\n  );\n  const totCost = allInputCosts(initSurveyorsFee, initLegalFee, initMortgageFee,\n    refurbCost, otherCost, propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer);\n  const totIn = totCost - initMortgageAdvance;\n  const labels = calculationsLabels.initialFinanceLabels;\n\n  return [\n    { label: labels[0], value: initMortgageAdvance.toFixed(2) },\n    { label: labels[1], value: initialDeposit.toFixed(2) },\n    { label: labels[2], value: sdltTotal.toFixed(2) },\n    { label: labels[3], value: initFees.toFixed(2) },\n    { label: labels[4], value: other.toFixed(2) },\n    { label: labels[5], value: totIn.toFixed(2) },\n    { label: labels[6], value: totCost.toFixed(2) },\n    { label: labels[7], value: `${mortgageMonthlyInterest.toFixed(2)} pcm` },\n    { label: labels[8], value: `${monthlyRepayment.toFixed(2)} pcm` },\n    { label: labels[9], value: `${mortgageTerm} years` },\n  ];\n};\n\nexport default initialFinance;\n","import allInputCosts from './allInputCosts';\nimport calculationsLabels from '../../labels/calculations-labels';\n\nconst flip = ({\n  sellingLegalFee,\n  agentSellingFee,\n  initSurveyorsFee,\n  initLegalFee,\n  initMortgageFee,\n  refurbCost,\n  otherCost,\n  propertyValue,\n  stampDutyType,\n  stampDutyRegion,\n  stampDutyBuyer,\n  doneUpValue,\n}) => {\n  const totCost = allInputCosts(initSurveyorsFee, initLegalFee, initMortgageFee,\n    refurbCost, otherCost, propertyValue, stampDutyType, stampDutyRegion, stampDutyBuyer);\n\n  const fees = sellingLegalFee + agentSellingFee;\n  const flipGain = Math.round((doneUpValue - totCost) / totCost * 10000) / 100;\n  const col = (flipGain >= 20) ? 'green' : 'red';\n  const labels = calculationsLabels.flipLabels;\n\n  return [\n    { label: labels[0], value: doneUpValue.toFixed(2) },\n    { label: labels[1], value: fees.toFixed(2) },\n    { label: labels[2], value: totCost.toFixed(2) || '0' },\n    { label: labels[3], value: ((doneUpValue - (totCost + fees)).toFixed(2) || '0'), col },\n    { label: labels[4], value: flipGain.toFixed(2) || 0, col },\n  ];\n};\n\nexport default flip;\n","import calculationsLabels from '../../labels/calculations-labels';\n\nconst stressTest = ({\n  doneUpValue,\n  monthlyRent,\n  loanToValue,\n  mortgageStressInterestRatePercent,\n  mortgageStressMultipePercent,\n}) => {\n  const minRent = Math.ceil(\n    doneUpValue\n    * loanToValue / 100\n    * mortgageStressInterestRatePercent / 1200\n    * mortgageStressMultipePercent / 100,\n  );\n  const pass = monthlyRent >= minRent;\n  const labels = calculationsLabels.stressLabels;\n\n  return [\n    { label: labels[0], value: pass ? 'pass' : 'fail' },\n    { label: labels[1], value: minRent.toFixed(2) },\n  ];\n};\n\nexport default stressTest;\n","import { formTypes } from '../common/appConstants';\n\nconst field = {\n  label: 'User',\n  name: 'userEmail',\n  type: formTypes.EMAIL,\n  defVal: '',\n  required: true,\n};\n\nexport default field;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport field from './formconfig';\n\nconst PropTypes = require('prop-types');\n\nconst { name, type, label } = field;\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({ email: e.target.value });\n  }\n\n  handleSubmit(e) {\n    const { props: { doLogin }, state: { email } } = this;\n    e.preventDefault();\n    if (email) {\n      doLogin(email);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"column\" style={{ textAlign: 'center' }}>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            className=\"form-control\"\n            key={name}\n            type={type}\n            name={name}\n            id={name}\n            autoComplete=\"off\"\n            placeholder={`${label} [${type}]`}\n            onChange={this.handleChange}\n            onBlur={this.handleChange}\n            required\n          />\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n          >\n            go\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  doLogin: PropTypes.func.isRequired,\n};\n\nexport default Login;\n","import React from 'react';\n\nconst PropTypes = require('prop-types');\n\nfunction Logout({ doLogout }) {\n  const handleClick = (e) => {\n    e.preventDefault();\n    doLogout();\n  };\n\n  return (\n    <button\n      type=\"submit\"\n      className=\"\"\n      onClick={handleClick}\n    >\n      logoff\n    </button>\n  );\n}\n\nLogout.propTypes = {\n  doLogout: PropTypes.func.isRequired,\n};\n\nexport default Logout;\n","import { toastPlaceHolder } from './common/appConstants';\n\nconst toastMessages = {\n  unrecognisedUser: {\n    message: `You need to be whitelisted to use the view and save functions.\n          You can still use the app to perform calculations which can be printed,\n          if you want to save copies. If you think you should be whitelisted,\n          check the email address and try logging in again, or contact your administrator`,\n    options: { appearance: 'warning', autoDismissTimeout: 10000 },\n  },\n  dataRetrieved: {\n    message: 'proposal data refreshed', options: { appearance: 'success' },\n  },\n  noneSaved: {\n    message: 'you have no saved proposal data', options: { appearance: 'info' },\n  },\n  dataRetrievalError: {\n    message: 'something went wrong retrieving proposal data', options: { appearance: 'error' },\n  },\n  savedSuccess: {\n    message: `new version of ${toastPlaceHolder} saved successfully`, options: { appearance: 'success' },\n  },\n  saveError: {\n    message: `something went wrong saving new version of ${toastPlaceHolder}`, options: { appearance: 'error' },\n  },\n  deleteSuccess: {\n    message: `${toastPlaceHolder} deleted successfully`, options: { appearance: 'success' },\n  },\n  deleteError: {\n    message: `something went wrong deleting ${toastPlaceHolder}`, options: { appearance: 'error' },\n  },\n  login: {\n    message: `logged in as ${toastPlaceHolder}`, options: { appearance: 'success' },\n  },\n  logout: {\n    message: 'logged out', options: { appearance: 'success' },\n  },\n  loaded: {\n    message: `${toastPlaceHolder} loaded successfully`, options: { appearance: 'success' },\n  },\n};\n\nexport default toastMessages;\n","const shallowObjectEquals = (json1 = {}, json2 = {}) => {\n  const keys = Object.keys(json1);\n  return keys.every(k => json1[k] === json2[k]);\n};\n\nexport default shallowObjectEquals;\n","/* eslint-env browser */\nimport React, { Component } from 'react';\nimport { withCookies } from 'react-cookie';\nimport confirmDialog from './common/confirmDialog'; // Import\nimport Form from './form/FormComponent';\nimport fields from './form/formconfig';\nimport '../css/app.css';\nimport SavedStateList from './saved/SavedStateComponents';\nimport Results from './results/ResultsComponent';\nimport calculations from '../logic/calculations';\nimport Login from './login/LoginComponent';\nimport Logout from './login/LogoutComponent';\nimport toastMessages from './toastMessages';\nimport { toastPlaceHolder } from './common/appConstants';\nimport shallowObjectEquals from '../util/shallowObjectEquals';\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport showDate from '../util/showDate';\nimport StatelessComponents from './common/StatelessFormComponents';\n\nconst PropTypes = require('prop-types');\n\nconst { Input } = StatelessComponents;\n\nconst urls = {\n  comparisons: process.env.REACT_APP_COMPARISONS_URL,\n};\n\nclass App extends Component {\n  static setDefaultFormData() {\n    const defaults = {};\n    fields.map((ob) => {\n      defaults[ob.name] = ob.defVal;\n      return false;\n    });\n    return defaults;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        dealFinance: [],\n        buyToLet: [],\n        stress: [],\n        flip: [],\n      },\n      currency: 163,\n      savedStates: { Items: [] },\n      currentState: { projectName: '' },\n      hasWorkingAPI: false,\n      userEmail: props.cookies.get('email') || '',\n      showInput: true,\n      showResults: true,\n      showSaved: true,\n    };\n    this.topRef = React.createRef();\n    this.calculate = this.calculate.bind(this);\n    this.saveState = this.saveState.bind(this);\n    this.deleteState = this.deleteState.bind(this);\n    this.selectState = this.selectState.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this.toastIt = this.toastIt.bind(this);\n    this.checkSaveOrAbortChanges = this.checkSaveOrAbortChanges.bind(this);\n    this.tabLink = this.tabLink.bind(this);\n    this.selectTab = this.selectTab.bind(this);\n  }\n\n  componentDidMount() {\n    const { userEmail } = this.state;\n    if (userEmail !== '') {\n      this.getSavedStates(true);\n    }\n  }\n\n  getSavedStates(setDefault) {\n    const retrieveStates = async () => {\n      const sortByNameThenDate = (\n        { projectName: pNameA, id: idA },\n        { projectName: pNameB, id: idB },\n      ) => {\n        if ((pNameA + idA) < (pNameB + idB)) return -1;\n        if ((pNameA + idA) > (pNameB + idB)) return 1;\n        return 0;\n      };\n      const { userEmail } = this.state;\n      let data = null;\n      let setDefaultState = setDefault;\n\n      try {\n        const resp = await fetch(`${urls.comparisons}/user/${userEmail}`);\n        if (resp.status === 200) {\n          data = await resp.json();\n\n          if (data.Items.length > 0) {\n            data.Items.sort(sortByNameThenDate);\n            this.toastIt(toastMessages.dataRetrieved);\n          } else {\n            this.toastIt(toastMessages.noneSaved);\n          }\n        } else if (resp.status === 403) {\n          this.toastIt(toastMessages.unrecognisedUser);\n        } else {\n          setDefaultState = true;\n          this.toastIt(toastMessages.dataRetrievalError);\n        }\n      } catch (e) {\n        setDefaultState = true;\n        this.toastIt(toastMessages.dataRetrievalError);\n      } finally {\n        this.loadState(data, setDefaultState);\n      }\n    };\n    retrieveStates(setDefault).then(() => ({ getSavedStates: 'finished' }));\n  }\n\n  toastIt({ message, options }, label) {\n    const { toastManager } = this.props;\n    toastManager.add(message.replace(toastPlaceHolder, label), options);\n  }\n\n  findState(stateId) {\n    const { savedStates } = this.state;\n    return savedStates.Items.find(state => state.id === stateId);\n  }\n\n  loadState(data, setDefault) {\n    const { userEmail } = this.state;\n    const newState = {\n      savedStates: data || { Items: [] },\n      hasWorkingAPI: !!data,\n    };\n\n    if (setDefault) {\n      newState.currentState = App.setDefaultFormData();\n    }\n\n    if (userEmail && newState.currentState) {\n      newState.currentState.email = userEmail;\n    }\n\n    this.setState(newState);\n  }\n\n  calculate(changedField, newValue) {\n    const { currentState } = this.state;\n    const inputData = (changedField)\n      ? { ...currentState, [changedField]: newValue } : currentState;\n    const dealFinance = calculations.initialFinance(inputData);\n    const buyToLet = calculations.freeCash(inputData);\n    const flip = calculations.flip(inputData);\n    const stress = calculations.stressTest(inputData);\n    const currSymbol = calculations.getCurrencyCode(inputData);\n\n    document.getElementById('doc-title').text = inputData.projectName.replace(/ /g, '-');\n\n    const newState = {\n      data: {\n        dealFinance,\n        buyToLet,\n        stress,\n        flip,\n      },\n      currency: currSymbol,\n    };\n\n    if (changedField) {\n      newState.currentState = inputData;\n    }\n\n    this.setState(newState);\n  }\n\n  saveState() {\n    const persistState = async () => {\n      const { currentState, currentState: { projectName, postCode }, userEmail } = this.state;\n      if (projectName === '' || postCode === '') {\n        return;\n      }\n      const stateToSave = { ...currentState, email: userEmail };\n      try {\n        const resp = await fetch(urls.comparisons, {\n          method: 'PUT',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(stateToSave),\n        });\n        await resp.json();\n        this.toastIt(toastMessages.savedSuccess, projectName);\n      } catch (e) {\n        this.toastIt(toastMessages.saveError, projectName);\n      } finally {\n        // don't overwrite changes in form\n        this.getSavedStates(false);\n      }\n    };\n    persistState().then(() => ({ saveState: 'finished' }));\n  }\n\n  deleteState(stateId) {\n    const { projectName } = this.findState(stateId);\n    const message = `do you really want to delete '${projectName}' created ${showDate(stateId)}`;\n    confirmDialog(message, () => {\n      let setDefault = false;\n      const removeState = async (deleteStateId) => {\n        const { userEmail } = this.state;\n        try {\n          const resp = await fetch(urls.comparisons, {\n            method: 'DELETE',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ id: deleteStateId, email: userEmail }),\n          });\n          if (resp.status === 200) {\n            const { currentState: id } = this.state;\n            setDefault = id === deleteStateId;\n            this.toastIt(toastMessages.deleteSuccess, projectName);\n          }\n        } catch (err) {\n          this.toastIt(toastMessages.deleteError, projectName);\n        } finally {\n          this.getSavedStates(setDefault);\n        }\n      };\n      removeState(stateId).then(() => ({ delete: 'finished' }));\n    });\n  }\n\n  selectState(stateId) {\n    this.checkSaveOrAbortChanges(() => {\n      const selectedState = this.findState(stateId);\n      this.setState({ currentState: selectedState, showInput: true }, () => {\n        const { currentState: { projectName } } = this.state;\n        this.toastIt(toastMessages.loaded, projectName);\n        this.calculate();\n        window.scrollTo({ top: this.topRef, left: 0, behavior: 'smooth' });\n      });\n    });\n  }\n\n  checkSaveOrAbortChanges(fn) {\n    const { currentState, currentState: { projectName, id } } = this.state;\n    const changed = projectName !== '' && !shallowObjectEquals(currentState, this.findState(id));\n    const message = `'${projectName}' data has changed, changes will be lost, do you want to continue?`;\n    if (!changed) {\n      fn();\n    } else {\n      confirmDialog(message, fn, 'Save new version and continue', () => {\n        this.saveState();\n        fn();\n      });\n    }\n  }\n\n  handleNew(e) {\n    this.checkSaveOrAbortChanges(() => {\n      e.preventDefault();\n      this.setState(\n        { currentState: App.setDefaultFormData() }, () => this.calculate(),\n      );\n    });\n    e.target.blur();\n  }\n\n  login(email) {\n    const { cookies } = this.props;\n    cookies.set('email', email, { path: '/' });\n    this.setState({ userEmail: email }, () => {\n      this.toastIt(toastMessages.login, email);\n      this.getSavedStates(true);\n    });\n  }\n\n  tabLink(event) {\n    event.preventDefault();\n    const { id } = event.target;\n    this.setState({ selectedTab: id });\n  }\n\n  logout() {\n    const { cookies } = this.props;\n    cookies.set('email', '', { path: '/' });\n    this.setState({ userEmail: '' }, () => {\n      this.toastIt(toastMessages.logout);\n    });\n  }\n\n  selectTab(event) {\n    const { target: { name, checked } } = event;\n    this.setState({ [name]: checked });\n  }\n\n  render() {\n    const {\n      currency,\n      savedStates,\n      currentState,\n      hasWorkingAPI,\n      error,\n      userEmail,\n      showInput,\n      showResults,\n      showSaved,\n    } = this.state;\n    const { projectName, postCode } = currentState;\n    const showSave = (\n      hasWorkingAPI\n      && projectName !== ''\n      && postCode !== ''\n    );\n    const { Items } = savedStates;\n    const emailDomain = userEmail.split('@')[1];\n    const savedList = Items.length > 0 && userEmail ? (\n      <React.Fragment>\n        <SavedStateList\n          data={Items}\n          ondelete={this.deleteState}\n          onclick={this.selectState}\n          useremail={userEmail}\n          filter={o => o.email === userEmail}\n          doLogin={this.login}\n        />\n        <h6>\n          Other saved stuff from\n          {` ${emailDomain}`}\n        </h6>\n        <SavedStateList\n          data={Items}\n          ondelete={this.deleteState}\n          onclick={this.selectState}\n          useremail={userEmail}\n          filter={o => o.email !== userEmail}\n        />\n      </React.Fragment>\n    )\n      : (\n        <div style={{ float: 'left' }}>\n          {toastMessages.unrecognisedUser.message}\n        </div>\n      );\n    const newButton = currentState.projectName !== '' ? (\n      <ul className=\"right\">\n        <li>\n          <button\n            type=\"submit\"\n            className=\"btn-primary form-control\"\n            onClick={event => this.handleNew(event)}\n          >\n            new\n          </button>\n        </li>\n      </ul>\n    ) : '';\n\n    return Object.keys(currentState).length > 1 && userEmail ? (\n      <div className=\"App\">\n        <div className=\"d-flex flex-wrap\">\n          <div\n            ref={this.topRef}\n            className=\"column text-center\"\n          >\n            <h5>Property investment deal analyser</h5>\n          </div>\n          <div className=\"column\">\n            <ul className=\"display-options\">\n              <li className=\"do-label\">\n                show:\n              </li>\n              <Input\n                style={{ float: 'left' }}\n                name=\"showInput\"\n                label=\"input\"\n                defVal={showInput ? 'yes' : 'no'}\n                type=\"checkbox\"\n                onInput={this.selectTab}\n                placeholder=\"\"\n                required={false}\n              />\n              <Input\n                style={{ float: 'left' }}\n                name=\"showResults\"\n                defVal={showResults ? 'yes' : 'no'}\n                label=\"results\"\n                type=\"checkbox\"\n                onInput={this.selectTab}\n                placeholder=\"\"\n                required={false}\n              />\n              <Input\n                style={{ float: 'left' }}\n                name=\"showSaved\"\n                defVal={showSaved ? 'yes' : 'no'}\n                label=\"saved\"\n                type=\"checkbox\"\n                onInput={this.selectTab}\n                placeholder=\"\"\n                required={false}\n              />\n            </ul>\n          </div>\n        </div>\n        <div\n          className=\"column input-form\"\n          style={{ display: showInput ? '' : 'none' }}\n        >\n          <Form\n            name=\"propcalc\"\n            fields={fields}\n            formData={currentState}\n            twocols=\"yes\"\n            calculate={this.calculate}\n            currsymbol={currency}\n            onsave={this.saveState}\n            showsave={showSave}\n            error={error}\n          />\n          {newButton}\n        </div>\n        <div className=\"column results\" style={{ display: showResults ? '' : 'none' }}>\n          {Results(this.state)}\n        </div>\n        <div className=\"column states\" style={{ display: showSaved ? '' : 'none' }}>\n          <div className=\"my-stuff\">\n            <h6>\n              My stuff (\n              {userEmail}\n              )\n            </h6>\n          </div>\n          <div className=\"logout\">\n            <Logout\n              doLogout={this.logout}\n            />\n          </div>\n          <div className=\"saved-list\">\n            {savedList}\n          </div>\n        </div>\n      </div>\n    )\n      : (\n        <Login\n          doLogin={this.login}\n        />\n      );\n  }\n}\n\nApp.propTypes = {\n  cookies: PropTypes.instanceOf(Object).isRequired,\n  toastManager: PropTypes.instanceOf(Object).isRequired,\n};\n\nexport default withCookies(App);\n","import React from 'react';\nimport { CookiesProvider } from 'react-cookie';\nimport { ToastProvider, withToastManager } from 'react-toast-notifications';\nimport App from './components/App';\n\nconst ToastyApp = withToastManager(App);\n\nexport default function Root() {\n  return (\n    <CookiesProvider>\n      <ToastProvider\n        autoDismissTimeout={2000}\n        autoDismiss\n        placement=\"bottom-center\"\n      >\n        <ToastyApp />\n      </ToastProvider>\n    </CookiesProvider>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-env browser */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './Root';\nimport * as serviceWorker from './serviceWorker';\n\nimport './css/bootstrap-override.scss';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}